"use strict";var Atomik=function(){this.wsBaseURL="https://ws.atomikad.com/action.php",this.ads=[],this.passbackExternalCallback=null,this.retryCount=0,this.semanticObjectRequested=!1,this.semanticObjectForPage=null,this.admantxClusters=null,this.brandProtectionCluster=null};Atomik.prototype.scanPage=function(){for(var a,b={src_page_uri:window.location.href,images:[]},c=this.getAllElementsWithAttribute("atomik-pl"),d=0,e=c.length;d<e;d++){if(a=null,"IMG"!=c[d].tagName){var f=c[d].querySelector(":scope > img");null!=f&&(a=f.src)}else a=c[d].src;null!=a&&b.images.push({url:a})}if(0==b.images.length)return void this.consoleLog("ATOMIKSDK NO IMAGE TO ENQUEUE");var g=this,h=this.wsBaseURL+"?method=enqueue",j=new XMLHttpRequest;j.open("POST",h,!0),j.onreadystatechange=function(){4===j.readyState&&(200===j.status||202===j.status?g.consoleLog("ATOMIKSDK ENQUEUE RESPONSE OK"):g.consoleLog("ATOMIKSDK ENQUEUE ERROR: "+j.status+" - "+j.statusText))};var k=JSON.stringify(b);j.send(k)},Atomik.prototype.getPlacementLessTags=function(){var a={src_page_uri:window.location.href,force_cache_update:null!==Atomik.getQueryParameterByName("atk-debug")},b=this,c=this.wsBaseURL+"?method=get_placementless_rules",d=new XMLHttpRequest;d.open("POST",c,!0),d.onreadystatechange=function(){if(4===d.readyState){if(200===d.status||202===d.status){var a=d.responseText;b.consoleLog("ATOMIKSDK PL-LESS RESPONSE OK");try{for(var c,e=window.location.href,f=JSON.parse(a),g=0;g<f.length;g++)if(c=f[g],c.placement&&c.url_expression&&c.css_selector){var h=new RegExp(c.url_expression,"i"),j=h.test(e);if(j){var k=document.querySelectorAll(c.css_selector);if(k&&0<k.length)for(var l,m=0;m<k.length;m++)l=k[m],l.setAttribute("atomik-pl",c.placement),b.consoleLog("ATOMIKSDK PL-LESS ADDED PLACEMENT ON IMG: "+c.placement)}}}catch(a){b.consoleLog("ATOMIKSDK PL-LESS ERROR: "+a.message)}}else b.consoleLog("ATOMIKSDK PL-LESS ERROR: "+d.status+" - "+d.statusText);"www.subito.it"!=window.location.hostname&&"www.commentimemorabili.it"!=window.location.hostname&&"www.vanityfair.it"!=window.location.hostname&&b.scanPage(),b.getAllClustersAndCreateAd()}};var e=JSON.stringify(a);d.send(e)},Atomik.prototype.getAllClustersAndCreateAd=function(){var a=this.getAllElementsWithAttribute("atomik-pl");if(0==a.length&&5>this.retryCount){var b=this;return void setTimeout(function(){b.consoleLog("ATOMIKSDK RETRY BECAUSE NO PLACEMENTS FOUND"),b.retryCount+=1,b.getPlacementLessTags()},1e3)}Atomik.track_audience();for(var c=[],d=0,e=a.length;d<e;d++){null!==Atomik.getQueryParameterByName("atk-debug-pb")&&a[d].setAttribute("atomik-pl","atomik/ydqr669bcrqfe48xiwwtcg7nj");var f=a[d].getAttribute("atomik-pl");if(-1===c.indexOf(f)){"atomik/ydqr669bcrqfe48xiwwtcg7nj"!=f&&c.push(f);var g="privatePassbackCallback"+d;Atomik[g]="<script>window.top.Atomik.getInstance().consoleLog(\"ATOMIKSDK PASSBACK ON PLACEMENT: "+f+"\");window.top.Atomik.getInstance().createSpotXTag(\""+f+"\");</script>";var h="privateZodiakPassbackCallback"+d;Atomik[h]="<script>window.top.Atomik.getInstance().consoleLog(\"ATOMIKSDK PASSBACK ON ZODIAK: "+f+"\");window.top.Atomik.getInstance().createSpotXTag(\""+f+"\");</script>";var j={placement:f,placement_name:null,targetImage:a[d],passbackName:g,zodiakPassbackName:h,clusters:null,clusterLabels:null,adTagID:null,alreadyInView:!1,adContainer:null,semanticEnabled:!1,semanticClusters:null,semanticBrandSafety:null,objects:null,celebrities:null,semanticRetryCount:3,zodiakTag:null,spotxTag:null,closed:!1};this.ads.push(j),"www.commentimemorabili.it"!=window.location.hostname&&"www.vanityfair.it"!=window.location.hostname&&"www.subito.it"!=window.location.hostname?"IMG"==a[d].tagName?this.getClustersForImg(a[d]):this.getAdTagForImg(a[d]):this.getAdTagForImg(a[d])}else this.consoleLog("ATOMIKSDK SKIP ALREADY USED PLACEMENT")}},Atomik.prototype.getClustersForImg=function(a){var b="";b=this.sanitizeImgUrl(a.src);var c=Atomik.md5(b),d=this,e=this.wsBaseURL+"?method=get_clusters",f=new XMLHttpRequest;f.open("POST",e,!0),f.onreadystatechange=function(){if(4===f.readyState){if(200===f.status||202===f.status){var b=f.responseText;d.consoleLog("ATOMIKSDK GET-CLUSTERS RESPONSE FOR IMAGE ["+a.src+"]: "+b),"function"==typeof atomikImageClusterReady&&atomikImageClusterReady(b);try{var c=JSON.parse(b),e=d.getAdSlotFromImage(a);if(e.clusters=c,e.clusters.tensorflow&&0<e.clusters.tensorflow.length){for(var c=[],g=.4,h=0;h<e.clusters.tensorflow.length;h++)-1===c.indexOf(e.clusters.tensorflow[h].label)&&e.clusters.tensorflow[h].score>g&&c.push(e.clusters.tensorflow[h].label);for(var j,h=0;h<e.clusters.tensorflow.length;h++)if(e.clusters.tensorflow[h].score>g)for(var k in j=e.clusters.tensorflow[h].treemap,j)-1===c.indexOf(j[k])&&c.push(j[k]);0<c.length&&(e.clusterLabels=c)}if(0<e.clusters.objects.length){for(var l=[],m=null,n=null,o=null,p=null,q=null,r=null,h=0;h<e.clusters.objects.length;h++){m=e.clusters.objects[h].label,n=e.clusters.objects[h].score,o=e.clusters.objects[h].xmin,p=e.clusters.objects[h].ymin,q=e.clusters.objects[h].xmax,r=e.clusters.objects[h].ymax;var s=(m in l);s?(new_w=100*(q-o),new_h=100*(r-p),old_w=100*(l[m].xmax-l[m].xmax),old_h=100*(l[m].ymax-l[m].xmin),new_w*new_h>old_w*old_h&&(l[m]={score:n,xmin:o,ymin:p,xmax:q,ymax:r})):l[m]={score:n,xmin:o,ymin:p,xmax:q,ymax:r}}e.objects=l}if(e.clusters.celebrities&&0<e.clusters.celebrities.length){for(var t=[],u=null,h=0;h<e.clusters.celebrities.length;h++){u=e.clusters.celebrities[h].name;var s=t.includes(u);s||t.push(u)}e.celebrities=t}if(null!==d.admantxClusters)e.semanticClusters=d.admantxClusters;else if(0<e.clusters.admantx.length){for(var v=[],m=null,n=null,h=0;h<e.clusters.admantx.length;h++)m=e.clusters.admantx[h].label,n=e.clusters.admantx[h].score,-1===v.indexOf(m)&&v.push({name:m,score:n});e.semanticClusters=v,d.admantxClusters=v}if(null!==d.brandProtectionCluster)e.semanticClusters=d.brandProtectionCluster;else if(0<e.clusters.brandProtection.length){var w=[];m=null,n=null;for(var h=0;h<e.clusters.brandProtection.length;h++)-1===w.indexOf(e.clusters.brandProtection[h])&&(m=e.clusters.brandProtection[h].label,n=e.clusters.brandProtection[h].score,w.push({name:m,score:n}));e.semanticBrandSafety=w,d.brandProtectionCluster=w}}catch(a){d.consoleLog("ATOMIKSDK GET-CLUSTERS ERROR: "+a.message)}}else d.consoleLog("ATOMIKSDK GET-CLUSTERS ERROR: "+f.status+" - "+f.statusText);d.recordClustersOnPlacementEventForImage(a),d.getAdTagForImg(a)}};var g=JSON.stringify({image_url_hash:c});f.send(g)},Atomik.prototype.getAdTagForImg=function(a){var b={atomik_placement:a.getAttribute("atomik-pl"),force_cache_update:null!==Atomik.getQueryParameterByName("atk-debug")},c=this,d=this.wsBaseURL+"?method=get_placement_info",e=new XMLHttpRequest;e.open("POST",d,!0),e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status||202===e.status){var b=c.getAdSlotFromImage(a),d=e.responseText;try{var f=JSON.parse(d),g=f.adtags;if(g){var h=g.adform;if(h&&0<h.length){b.adTagID=h[0],b.semanticEnabled=f.semantic_enabled,b.placement_name=f.placement_name;var i=g.ozdigital;if(i&&0<i.length){var j=i[0],k="728x90",l="[1,1],[728,90],[720,240]";Atomik.isMobile()&&(k+="_320x50",l+=",[320,50]"),1.5<a.offsetHeight/a.offsetWidth&&(k+="_320x100",l+=",[320,100]"),k+="_970x250",l+=",[970,250]",b.zodiakTag="https://secure.adnxs.com/ttj?id=".concat(j,"&size=1x1&promo_sizes=").concat("720x240,728x90","&promo_alignment=center&pt9=").concat(k,"&pt8=[").concat(l,"]&pt1=window.top.Atomik.").concat(b.zodiakPassbackName)}var m=g.spotx;m&&0<m.length&&(b.spotxTag=m[0])}else c.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: NO VALID TAG")}else c.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: NO VALID TAG")}catch(a){c.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: "+a.message)}if(!0===Atomik.subitoCheck()){var n=Atomik.getSubitoSemantics();for(var o in b.clusterLabels=[],n)b.clusterLabels.push(n[o].name);c.recordCustomClustersForImage(a,n)}b.semanticEnabled?c.getSemanticForImg(a):c.createAdContainerOnImage(a)}else c.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: "+e.status+" - "+e.statusText)};var f=JSON.stringify(b);e.send(f)},Atomik.prototype.getSemanticForImg=function(a){var b=window.location.search.substring(1).split("&"),c=b.find(function(b){return b.includes("fbclid")}),d=window.location.href;if(c!==void 0){if(1<b.length){var e=b.indexOf(c);c=e===b.length-1?"&"+c:c+"&"}d=d.replace(c,""),1===b.length&&(d=d.slice(0,-1))}var f={key:"b93bdb1b311bb646d6b138b12c5ec3949a91f532dd0992968bdcaf3ef94c183f",method:"descriptor",mode:"async",decorator:"json",type:"url",filter:["categories","admants","feelings","entities"],body:encodeURIComponent(d)},g=this.getAdSlotFromImage(a);if(null!=g.semanticClusters||null!=g.semanticBrandSafety){var h=this;h.createAdContainerOnImage(a)}else if(this.semanticObjectRequested)this.addSemanticOnImgDelayed(a);else{this.semanticObjectRequested=!0;var h=this,i="https://euasync01.admantx.com/admantx/service"+"?request="+JSON.stringify(f),j=new XMLHttpRequest;j.open("GET",i,!0),j.onreadystatechange=function(){if(4===j.readyState){if(200===j.status){var b=j.responseText;h.consoleLog("ATOMIKSDK GET-SEMANTIC RESPONSE: "+b);try{var c=JSON.parse(b);"OK"==c.valid?(h.semanticObjectForPage=c,h.addSemanticOnImg(a)):h.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: NO VALID RESPONSE")}catch(a){h.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: "+a.message)}}else h.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: "+j.status+" - "+j.statusText);h.createAdContainerOnImage(a)}},j.send()}},Atomik.prototype.recordCustomClustersForImage=function(a,b){var c=this.getAdSlotFromImage(a);if(null==b)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 4 NO CLUSTERS FOR IMAGE ["+a.src+"]");for(var d=a.firstElementChild.firstElementChild.firstElementChild.src,e=[],f=0;f<b.length;f++){var g=b[f],h={label:Atomik.sanitizeCustomCluster(g.name).toLowerCase(),score:g.score/100};e.push(h)}var j={src_page_uri:window.location.href,event_type:4,image_url:d,clusters:e},k=this,l=this.wsBaseURL+"?method=record_event",m=new XMLHttpRequest;m.open("POST",l,!0),m.onreadystatechange=function(){4===m.readyState&&(200===m.status||202===m.status?k.consoleLog("ATOMIKSDK RECORD-EVENT 4 SUCCESS FOR PLACEMENT ["+c.placement+"]"):k.consoleLog("ATOMIKSDK RECORD-EVENT 4 ERROR: "+m.status+" - "+m.statusText))};var n=JSON.stringify(j);m.send(n)},Atomik.prototype.addSemanticOnImg=function(a){if(null!==this.semanticObjectForPage){var b=this.getAdSlotFromImage(a);void 0===this.semanticObjectForPage.entities&&(this.semanticObjectForPage.categories=[]),void 0===this.semanticObjectForPage.feelings&&(this.semanticObjectForPage.feelings=[]),void 0===this.semanticObjectForPage.entities&&(this.semanticObjectForPage.entities=[]),b.semanticClusters=this.semanticObjectForPage.categories.concat(this.semanticObjectForPage.feelings.concat(this.semanticObjectForPage.entities)),b.semanticBrandSafety=this.semanticObjectForPage.admants,this.recordSemanticClustersForImage(a)}},Atomik.prototype.addSemanticOnImgDelayed=function(a){var b=this.getAdSlotFromImage(a),c=this;null===this.semanticObjectForPage?(b.semanticRetryCount-=1,0<b.semanticRetryCount?setTimeout(function(){c.addSemanticOnImgDelayed(a)},200):c.createAdContainerOnImage(a)):(this.consoleLog("ATOMIKSDK GET-SEMANTIC CACHED FOR PAGE"),this.addSemanticOnImg(a),c.createAdContainerOnImage(a))},Atomik.prototype.createAdContainerOnImage=function(a){var b=this,c=jQuery(a),d=this.getAdSlotFromImage(a);this.consoleLog("ATOMIKSDK CREATE AD CONTAINER ON PLACEMENT ["+d.placement+"]");var e=document.createElement("div");e.id="atk-ad-"+Math.round(1e4*Math.random());var f=jQuery(e),g=c.parent();if(g.is("div")){var h=g.css("position");(h===void 0||"static"==h)&&g.css("position","relative")}f.insertAfter(c),d.adContainer=e,b.recordSDKReadyEventForPlacement(a),f.css({position:"absolute",border:"none",display:"block",margin:c.css("margin"),padding:c.css("padding")});var i=c.css("zIndex");i!==void 0&&"auto"!==i&&f.css("zIndex",i+1),b.setAdContainerPosition(e,a);var j;Atomik.sportNetworkMobileCheck()?j="#"+e.id+" iframe:first-child {position: absolute !important; bottom: 0 !important; top:auto!important; height:40%!important;} ":Atomik.ItaliaOnRoadCheck()&&(j="#"+e.id+" > div > div > iframe {margin-top:0!important;}"),Atomik.injectStyles(j),c.mutate("width height top left bottom right offsetTop offsetLeft",function(){b.consoleLog("ATOMIKSDK MUTATE"),b.setAdContainerPosition(e,a),jQuery.inviewport(a,{threshold:0,container:window})&&b.checkImgInView(e,a)}),c.inView(function(){b.checkImgInView(e,a)})},Atomik.prototype.setAdContainerPosition=function(a,b){var c=jQuery(a),d=jQuery(b);if(Atomik.rcsCheck()){var e=d.siblings(".didascalia_img"),f=0;e!==void 0&&null!==e&&"none"!=e.css("display")&&(f=e.outerHeight()-1),c.css({top:d.position().top,left:d.position().left,bottom:d.position().bottom-f,right:d.position().right,margin:d.css("margin"),padding:d.css("padding")}),c.width(d.width()),c.height(d.height()-f)}else{c.css({top:d.position().top,left:d.position().left,bottom:d.position().bottom,right:d.position().right,margin:d.css("margin"),padding:d.css("padding")}),c.width(d.width());var g=$(".thumbnails").height()+parseInt($(".thumbnails").css("padding-top"))+parseInt($(".thumbnails").css("padding-bottom"));g=isNaN(g)?0:g,c.height(d.height()-g)}},Atomik.prototype.removeZIndexFromImage=function(a){var b=this.ads[a];if(null!=b&&null!=b.adContainer){var c=jQuery(b.adContainer);c.css({zIndex:0})}},Atomik.prototype.checkImgInView=function(a,b){var c=this.getAdSlotFromImage(b);if(!0!=c.alreadyInView&&(c.alreadyInView=!0,this.consoleLog("ATOMIKSDK IMAGE IN-VIEW ["+b.src+"]"),null!=c.adTagID)){if(null!=c.zodiakTag){var d=!1;c.semanticBrandSafety&&(d=d||c.semanticBrandSafety.some(function(a){return"crimes"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"parental_protection"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"weaponry_and_military"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"accidents"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"alcohol_and_tobacco"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"illegal_drugs"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"natural_disasters"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"terrorism"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"illegal_download"===a.name}),d=d||c.semanticBrandSafety.some(function(a){return"illegal_streaming"===a.name})),d||(c.zodiakTag=this.addClustersOnTag(c,c.zodiakTag,"atomik_qskw"),Atomik[c.passbackName]="\n            <script type=\"text/javascript\">\n                window.placement_name = \"".concat(c.placement_name,"\";\n            </script>\n            <div id=\"atomik-container\" style=\"opacity: 0\"><SCRIPT SRC=\"").concat(c.zodiakTag,"\" TYPE=\"text/javascript\"></SCRIPT>\n            <script>\n                 var external_container = window.frameElement.parentElement;\n                 /*var external_observerOptions = {childList: true,attributes: true,subtree: true};\n                 var external_observer = new MutationObserver(onResizeEvent); \n                 external_observer.observe(external_container, external_observerOptions);*/\n                 \n                 var element = document.getElementById(\"atomik-container\");\n                 var closeSetted = false;\n                 var observerOptions = {childList: true,attributes: true,subtree: true};\n                 var observer = new MutationObserver(onResizeEvent); \n                 observer.observe(element, observerOptions);\n                 function onResizeEvent(){\n                    var creativeIframeContainer = document.querySelector('[id^=\"google_ads_iframe_\"] iframe')\n                    var creativeRecallContainer = document.querySelector('[id^=\"adform-adbox-\"]');\n                    \n                    if(creativeRecallContainer && creativeRecallContainer.offsetWidth === 1){\n                        \n                        //Unset property\n                        window.frameElement.style.setProperty(\"width\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"unset\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.transform = \"unset\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        window.frameElement.style.marginTop = \"unset\";\n                        \n                        //Set property\n                        window.frameElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        element.style.setProperty(\"height\", \"100%\", \"important\");;\n                        element.style.setProperty(\"width\", \"100%\", \"important\");;\n                        element.style.opacity = \"1\";\n                    }else \n                        if(element.offsetWidth == 970 && element.offsetHeight == 250 && (window.frameElement.parentElement.offsetHeight/window.frameElement.parentElement.offsetWidth)<0.9){\n                            var imgWidth = window.frameElement.parentElement.offsetWidth;\n                            var imgHeight = window.frameElement.parentElement.offsetHeight;\n                            var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                            window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                            var scaleFactor = (imgHeight / 3) / element.offsetHeight;\n                            window.frameElement.style.transform = \"scale3d(\" + scaleFactor + \", \" + scaleFactor + \", 1)\";\n                            window.frameElement.style.transformOrigin = \"0 0\";\n                            window.frameElement.style.setProperty(\"margin-top\", parseInt(imgHeight - element.offsetHeight*scaleFactor) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"margin-left\", parseInt((imgWidth - element.offsetWidth*scaleFactor)/2) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                            window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                            window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                            \n                    }else if(element.offsetWidth > 650){\n                        /*if(creativeIframeContainer.offsetWidth === 720 || element.offsetWidth === 720){\n                            closeSetted = true;\n                        }*/\n                        var imgWidth = window.frameElement.parentElement.offsetWidth;\n                        var imgHeight = window.frameElement.parentElement.offsetHeight;\n                        var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                        window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.marginTop = parseInt(imgHeight - frameHeight) + \"px\";\n                        window.frameElement.style.transform = \"scale3d(\" + imgWidth/element.offsetWidth + \", \" + imgWidth/element.offsetWidth + \", 1)\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        if(!closeSetted && element.offsetWidth !== 720){\n                            var div = document.createElement(\"img\"); div.src=\"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\"; div.style.height = \"25px\"; div.style.position = \"absolute\"; div.style.left = \"0px\"; div.style.top = \"0px\";  div.style.cursor = \"pointer\";\n                            element.appendChild(div); div.addEventListener(\"click\", function(){\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(c.placement,"\");\n                            }); \n                            closeSetted = true;\n                        }\n                        element.style.opacity = \"1\";\n                    }\n                }\n            </script>\n            </div>"))}var e="adx.adform.net/adx/?rnd="+Math.random();e+=null===Atomik.getQueryParameterByName("atk-pb")?"&mid="+c.adTagID:"&mid=12398456",e+="&pbvar=Atomik."+c.passbackName,e=this.addClustersOnTag(c,e,"mkv");var f=jQuery(b);e+=f.width()>=f.height()?"&mkv=ImgOrientation:horizontal":"&mkv=ImgOrientation:vertical";var g=b.offsetWidth*b.offsetWidth;75000>g&&(e+="&mkv=metrics:small"),75000<=g&&158400>g&&(e+="&mkv=metrics:medium"),158400<=g&&(e+="&mkv=metrics:large"),this.consoleLog("ATOMIKSDK LOAD AD FROM TAG FOR IMAGE ["+b.src+"]: "+e),this.recordInViewEventForPlacement(b);var h="<script data-adfscript=\""+e+"\"></script><script src=\"//s1.adform.net/banners/scripts/adx.js\" async defer></script>";Atomik.postscribe(a,h);var i=Atomik.reloadList();if(c.placement in i){var j=this;setTimeout(function(){j.reloadAdTag(a,c,h)},1e3*i[c.placement])}}},Atomik.prototype.addClustersOnTag=function(a,b,c){var d=!1;if(a.semanticClusters&&0<a.semanticClusters.length)for(var e=0;e<a.semanticClusters.length;e++)try{var f="adx_"+a.semanticClusters[e].name.toLowerCase().replace(/ /g,"_");"mkv"===c&&(f="admantx:"+f),d?b+=","+encodeURI(f):(b+="&"+c+"="+encodeURI(f),d=!0)}catch(a){}var d=!1;if(a.semanticBrandSafety&&0<a.semanticBrandSafety.length)for(var e=0;e<a.semanticBrandSafety.length;e++)try{var f="adx_bs_"+a.semanticBrandSafety[e].name.toLowerCase().replace("brand protection - ","").replace(/ /g,"_");"mkv"===c&&(f="brand_protection:"+f),d?b+=","+encodeURI(f):(b+="&"+c+"="+encodeURI(f),d=!0)}catch(a){}var d=!1;if(a.clusterLabels&&0<a.clusterLabels.length)for(var g="",e=0;e<a.clusterLabels.length;e++)g=Atomik.subitoCheck()?"sbt_"+a.clusterLabels[e]:a.clusterLabels[e],"mkv"===c&&(g="tensorflow:"+g),g=g.replace(/,/g,";"),d?b+=","+encodeURI(g):(b+="&"+c+"="+encodeURI(g),d=!0);if(d=!1,a.objects&&0<Object.keys(a.objects).length)for(var h,e=0;e<Object.keys(a.objects).length;e++){h="obj_"+Object.keys(a.objects)[e],"mkv"===c&&(h="obj_det:"+h);try{d?b+=","+encodeURI(h):(b+="&"+c+"="+encodeURI(h),d=!0)}catch(a){}}var d=!1;if(a.celebrities&&0<a.celebrities.length)for(var j="",e=0;e<a.celebrities.length;e++)j=a.celebrities[e],"mkv"===c&&(j="celebrities:"+j),j=j.replace(/ /g,"_"),d?b+=","+encodeURI(g):(b+="&"+c+"="+encodeURI(j),d=!0);return b},Atomik.prototype.createSpotXTag=function(a){var b=this.getAdSlotFromPlacement(a);if(null==b.spotxTag)return void(window.top.Atomik.getInstance().passbackExternalCallback&&window.top.Atomik.getInstance().passbackExternalCallback(a,""));var c=b.adContainer,d=b.spotxTag,e=c.id,f=document.createElement("script");f.type="text/javascript",f.src="//js.spotx.tv/easi/v1/"+d+".js",f.setAttribute("data-spotx_channel_id",d),f.setAttribute("data-spotx_ad_unit","instream"),f.setAttribute("data-spotx_autoplay","1"),f.setAttribute("data-spotx_blocked_autoplay_override_mode","1"),f.setAttribute("data-spotx_ad_volume","0"),f.setAttribute("data-spotx_ad_skippable","1"),f.setAttribute("data-spotx_ad_skip_delay","5"),f.setAttribute("data-spotx_content_type","other"),f.setAttribute("data-spotx_content_page_url",encodeURI(window.location.href));var g=jQuery(c).width(),h=jQuery(c).height();f.setAttribute("data-spotx_content_width",g),f.setAttribute("data-spotx_content_height",h),f.setAttribute("data-spotx_ad_done_function","privateSpotXPassback"),f.setAttribute("data-spotx_content_container_id",e),c.appendChild(f)},Atomik.prototype.recordClustersOnPlacementEventForImage=function(a){var b=this.getAdSlotFromImage(a);if(null==b.clusterLabels)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 0 NO CLUSTERS FOR PLACEMENT ["+b.placement+"]");var c=a.getAttribute("atomik-pl");if(null==c)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 0 NO PLACEMENT FOR TARGET ["+a+"]");var d="";d=Atomik.subitoCheck()?this.sanitizeImgUrl(a.firstElementChild.src):this.sanitizeImgUrl(a.src);var e=Atomik.md5(d),f={event_type:0,image_url_hash:e,atomik_placement:c,clusters:b.clusterLabels},g=this,h=this.wsBaseURL+"?method=record_event",i=new XMLHttpRequest;i.open("POST",h,!0),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||202===i.status?g.consoleLog("ATOMIKSDK RECORD-EVENT 0 SUCCESS FOR PLACEMENT ["+c+"]"):g.consoleLog("ATOMIKSDK RECORD-EVENT 0 ERROR: "+i.status+" - "+i.statusText))};var j=JSON.stringify(f);i.send(j)},Atomik.prototype.recordSDKReadyEventForPlacement=function(a){var b=a.getAttribute("atomik-pl");if(null==b)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 1 NO PLACEMENT FOR IMAGE ["+a.src+"]");var c=this,d=this.wsBaseURL+"?method=record_event&cb="+Math.random(),e=new XMLHttpRequest;e.open("POST",d,!0),e.onreadystatechange=function(){4===e.readyState&&(200===e.status||202===e.status?c.consoleLog("ATOMIKSDK RECORD-EVENT 1 SUCCESS FOR PLACEMENT ["+b+"]"):c.consoleLog("ATOMIKSDK RECORD-EVENT 1 ERROR: "+e.status+" - "+e.statusText))};var f=JSON.stringify({event_type:1,atomik_placement:b});e.send(f)},Atomik.prototype.recordInViewEventForPlacement=function(a){var b=a.getAttribute("atomik-pl");var c=this,d=this.wsBaseURL+"?method=record_event&cb="+Math.random(),e=new XMLHttpRequest;var f=JSON.stringify({event_type:2,atomik_placement:b})},Atomik.prototype.recordSemanticClustersForImage=function(a){var b=this.getAdSlotFromImage(a);if(null==b.semanticClusters&&null==b.semanticBrandSafety)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 3 NO CLUSTERS FOR IMAGE ["+a.src+"]");var c=this.sanitizeImgUrl(a.src),d=Atomik.md5(c),e=[];if(b.semanticClusters)for(var f=0;f<b.semanticClusters.length;f++){var g=b.semanticClusters[f],h={label:g.name.toLowerCase(),score:g.score/100};e.push(h)}var j=[];if(b.semanticBrandSafety)for(var f=0;f<b.semanticBrandSafety.length;f++){var k=b.semanticBrandSafety[f],l={label:k.name.toLowerCase().replace("brand protection - ",""),score:k.score/100};j.push(l)}var m={event_type:3,image_url_hash:d,content_url:window.location.href,clusters:e,brand_protections:j},n=this,o=this.wsBaseURL+"?method=record_event",p=new XMLHttpRequest;p.open("POST",o,!0),p.onreadystatechange=function(){4===p.readyState&&(200===p.status||202===p.status?n.consoleLog("ATOMIKSDK RECORD-EVENT 3 SUCCESS FOR PLACEMENT ["+b.placement+"]"):n.consoleLog("ATOMIKSDK RECORD-EVENT 3 ERROR: "+p.status+" - "+p.statusText))};var q=JSON.stringify(m);p.send(q)},Atomik.prototype.getAllElementsWithAttribute=function(a){var b=[],c=document.querySelectorAll("["+a+"]");if(-1!=window.location.hostname.indexOf("www.corrieredellosport.it")||-1!=window.location.hostname.indexOf("www.tuttosport.com")){var d=Math.ceil(100*Math.random()),e=document.getElementsByClassName("foto-slider__slide").length;if(8<e&&30>d&&"DIV"==c[0].tagName)b.push(c[0]);else for(var f=0,g=c.length;f<g;f++)null!==c[f].getAttribute(a)&&"IMG"==c[f].tagName&&b.push(c[f])}else for(var f=0,g=c.length;f<g;f++)null!==c[f].getAttribute(a)&&b.push(c[f]);return b},Atomik.prototype.getAdSlotFromImage=function(a){for(var b=null,c=0;c<this.ads.length;c++)if(this.ads[c].targetImage===a){b=this.ads[c];break}return b},Atomik.prototype.getAdSlotFromPlacement=function(a){for(var b=null,c=0;c<this.ads.length;c++)if(this.ads[c].placement==a){b=this.ads[c];break}return b},Atomik.prototype.sanitizeImgUrl=function(a){var b=a.indexOf("://");if(-1==b)return a;var c=a.substring(0,b+3),d=a.substring(b+3,a.length),e=d.split("/",1)[0];if(!e)return a;if(3>e.split(".").length){return c+"www."+d}return a},Atomik.prototype.setClosedPl=function(a){var b=this.getAdSlotFromPlacement(a);b.closed=!0},Atomik.prototype.consoleLog=function(a){null!==Atomik.getQueryParameterByName("atk-debug")&&console.log(a)},Atomik.prototype.reloadAdTag=function(a,b,c){if(!1===b.closed){var d=this;for(d.consoleLog("ATOMIKSDK REFRESH AD TAG FOR PLACEMENT: "+b.placement);a.hasChildNodes();)a.removeChild(a.lastChild);Atomik.postscribe(a,c)}},Atomik.atomikPrivateInit=function(){Atomik.includeScript("https://cdn.jsdelivr.net/gh/AtomikAd/sdk/dist/core/atomik-utils.min.js",function(){Atomik.includeScript("https://cdn.jsdelivr.net/gh/AtomikAd/sdk/dist/core/atomik-postscribe.min.js",function(){atomikInst.getPlacementLessTags(),window.atomikReady&&window.atomikReady()})})},Atomik.onPassback=function(a){atomikInst&&(atomikInst.passbackExternalCallback=a)},Atomik.getQueryParameterByName=function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},Atomik.reloadList=function(){return{"atomik/qa23cnop0z0b7d5ztknu4tw4d":8,"atomik/cs9bqk13h4kuvj0j45gy2ttvx":8,"atomik/m40o1onp20o5rqrmunxeerltq":8,"atomik/1tcuvc3w0jz5tceqgu6yz3x84":8,"atomik/bgimhzwhfqetpibmrbk0afrkk":11,"atomik/k4g38b93fi1om5kao87mqjjet":13,"atomik/ibguzq8nhh7524pumsb1s6j77":12,"atomik/4cdv76z871wobsnjkqauzkjpl":11,"atomik/uz3qccd6dk46zg1qvfq22hfmo":13,"atomik/8xxov7guigkpq5o8uvj96skwt":12,"atomik/bvchqkzgixgu7hwaq98hzwcef":13,"atomik/xekxhaduheh4ian8f9ukkjc3i":11,"atomik/k0ku5vbeh3f66rmbsygj4m99c":11,"atomik/2d18ijbgq0nxovby0uy61sfuh":14,"atomik/rs02onsuaezurr5h6fd14r3jc":11,"atomik/rl4938w30qi71svb7vwhh39c2":11,"atomik/ymvjf7h3pfw33itjd2g2mp2q9":12,"atomik/frqvyoiezqvmvyespy426fpru":13,"atomik/qgpoq0q3zszx9n1jp24ujlf7z":10,"atomik/7lp2sap61lnvynan6t53f530y":11,"atomik/dcane43ya27yhcfiq7lascld8":10,"atomik/0c7epzuf9vw84bmj9h3blursb":10,"atomik/temjabvc32mcle46981k7g0w3":11}},Atomik.rcsCheck=function(){var a=window.location.hostname;return!(-1==a.indexOf("www.corriere.it")&&-1==a.indexOf("corriereinnovazione.corriere.it")&&-1==a.indexOf("motori.corriere.it")&&-1==a.indexOf("bergamo.corriere.it")&&-1==a.indexOf("corrieredibologna.corriere.it")&&-1==a.indexOf("roma.corriere.it")&&-1==a.indexOf("corrieredelmezzogiorno.corriere.it")&&-1==a.indexOf("brescia.corriere.it")&&-1==a.indexOf("corrierefiorentino.corriere.it"))},Atomik.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},Atomik.fattoGallery=function(){var a=window.location.hostname;return-1!=a.indexOf("www.ilfattoquotidiano.it")&&jQuery(".FQG-nav-next").css("width","20%"),!1},Atomik.youMediaGallery=function(){var a=window.location.hostname;return-1!=a.indexOf("youmedia.fanpage.it")&&(jQuery(".showArea.right").css("width","20%"),jQuery(".gradient.js-photo-info").css("z-index","-1")),!1},Atomik.subitoCheck=function(){var a=window.location.hostname;if(-1!=a.indexOf("subito.it")){var b=window.location.pathname;if(-1!=b.indexOf("/auto/")||-1!=b.indexOf("/moto-e-scooter/")||-1!=b.indexOf("veicoli-commerciali")||-1!=b.indexOf("caravan-e-camper"))return!0}return!1},Atomik.sportNetworkMobileCheck=function(){var a=window.location.hostname;return!(-1==a.indexOf("m.corrieredellosport.it")&&-1==a.indexOf("m.tuttosport.com"))},Atomik.ItaliaOnRoadCheck=function(){var a=window.location.hostname;return-1!=a.indexOf("www.italiaonroad.it")},Atomik.getSubitoSemantics=function(){var a=[];return jQuery(".vehicle-history ul li span").each(function(b,c){switch(jQuery(c).text()){case"Tipologia":a.push({name:jQuery(c).siblings().text().trim().toLowerCase(),score:100});break;case"Marca":a.push({name:jQuery(c).siblings().text().trim().toLowerCase(),score:100});break;case"Modello":a.push({name:jQuery(c).siblings().text().trim().toLowerCase(),score:100});break;case"Carburante":a.push({name:jQuery(c).siblings().text().trim().toLowerCase(),score:100});}}),a},Atomik.sanitizeCustomCluster=function(a){var b=a;return b=b.replace(/[\u00B0\u00B2\u00B3\u00B9\u02AF\u0670\u0711\u2121\u213B\u2207\u29B5\uFC5B-\uFC5D\uFC63\uFC90\uFCD9\u2070\u2071\u2074-\u208E\u2090-\u209C\u0345\u0656\u17D2\u1D62-\u1D6A\u2A27\u2C7C\u00AA]+/,""),b},Atomik.includeScript=function(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,c.onload=b,document.body.appendChild(c)},Atomik.injectStyles=function(a){jQuery("<div />",{html:"&shy;<style>"+a+"</style>"}).appendTo("body")},Atomik.setDbmStyle=function(a){var b=document.querySelector("#"+a),c=new MutationObserver(function(b){b.forEach(function(){var b=jQuery("iframe"),c=jQuery("#"+a);if(0!==c.length){var d=c.find("Iframe");if(0!==d.length&&d[0].id.startsWith("adf_")){var e=jQuery(d.contents().find("div")[0]);if(0!==e.length&&e[0].id.startsWith("google_ads_iframe")){var f=e.find("Iframe");0!==f.length&&f[0].id.startsWith("google_ads_iframe")&&(d[0].style.width="100%",d[0].style.position="absolute",d[0].style.bottom="0",d.contents().find("body")[0].style.width="100%",e[0].style.width="100%",f[0].style.width="100%")}}}})});c.observe(b,{childList:!0,attributes:!0,subtree:!0})},Atomik.getInstance=function(){return atomikInst},Atomik.track_audience=function(){var a=document.createElement("img");a.src="https://track.adform.net/Serving/TrackPoint/?pm=917458&lid=73540157",a.style.width="1px",a.style.height="1px",document.body.appendChild(a)};var privateSpotXPassback=function(a){a?Atomik.getInstance().consoleLog("ATOMIKSDK spotX AD done"):(Atomik.getInstance().consoleLog("ATOMIKSDK spotX passback"),window.top.Atomik.getInstance().passbackExternalCallback&&window.top.Atomik.getInstance().passbackExternalCallback("",""))},atomikInst=new Atomik;Atomik.doStart=function(){if(!window.jQuery){var a=document.createElement("script");a.type="text/javascript",a.src="https://code.jquery.com/jquery-1.12.4.min.js",a.onload=function(){Atomik.atomikPrivateInit()},document.body.appendChild(a)}else Atomik.atomikPrivateInit()},"loading"==document.readyState?document.addEventListener("DOMContentLoaded",Atomik.doStart):Atomik.doStart();