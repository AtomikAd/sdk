"use strict";var Atomik=function(){this.wsBaseURL="https://ws.atomikad.com/action.php",this.ads=[],this.passbackExternalCallback=null,this.retryCount=0,this.semanticObjectRequested=!1,this.semanticObjectForPage=null,this.admantxClusters=null,this.brandProtectionCluster=null};Atomik.prototype.scanPage=function(){for(var e,t={src_page_uri:window.location.href,images:[]},a=this.getAllElementsWithAttribute("atomik-pl"),o=0,s=a.length;o<s;o++){if(e=null,"IMG"!=a[o].tagName){var n=a[o].querySelector(":scope > img");null!=n&&(e=n.src)}else e=a[o].src;null!=e&&t.images.push({url:e})}if(0==t.images.length)return void this.consoleLog("ATOMIKSDK NO IMAGE TO ENQUEUE");var r=this,l=this.wsBaseURL+"?method=enqueue",m=new XMLHttpRequest;m.open("POST",l,!0),m.onreadystatechange=function(){4===m.readyState&&(200===m.status||202===m.status?r.consoleLog("ATOMIKSDK ENQUEUE RESPONSE OK"):r.consoleLog("ATOMIKSDK ENQUEUE ERROR: "+m.status+" - "+m.statusText))};var d=JSON.stringify(t);m.send(d)},Atomik.prototype.getPlacementLessTags=function(){var e={src_page_uri:window.location.href,force_cache_update:null!==Atomik.getQueryParameterByName("atk-debug")},t=this,n=this.wsBaseURL+"?method=get_placementless_rules",a=new XMLHttpRequest;a.open("POST",n,!0),a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status||202===a.status){var e=a.responseText;t.consoleLog("ATOMIKSDK PL-LESS RESPONSE OK");try{for(var n,o=window.location.href,s=JSON.parse(e),r=0;r<s.length;r++)if(n=s[r],n.placement&&n.url_expression&&n.css_selector){var l=new RegExp(n.url_expression,"i"),m=l.test(o);if(m){var d=document.querySelectorAll(n.css_selector);if(d&&0<d.length)for(var c,p=0;p<d.length;p++)c=d[p],c.setAttribute("atomik-pl",n.placement),t.consoleLog("ATOMIKSDK PL-LESS ADDED PLACEMENT ON IMG: "+n.placement)}}}catch(e){t.consoleLog("ATOMIKSDK PL-LESS ERROR: "+e.message)}}else t.consoleLog("ATOMIKSDK PL-LESS ERROR: "+a.status+" - "+a.statusText);"www.subito.it"!=window.location.hostname&&"www.commentimemorabili.it"!=window.location.hostname&&"www.vanityfair.it"!=window.location.hostname&&t.scanPage(),t.getAllClustersAndCreateAd()}};var i=JSON.stringify(e);a.send(i)},Atomik.prototype.getAllClustersAndCreateAd=function(){var e=this.getAllElementsWithAttribute("atomik-pl");if(0==e.length&&5>this.retryCount){var t=this;return void setTimeout(function(){t.consoleLog("ATOMIKSDK RETRY BECAUSE NO PLACEMENTS FOUND"),t.retryCount+=1,t.getPlacementLessTags()},1e3)}Atomik.track_audience();for(var a=[],o=0,s=e.length;o<s;o++){null!==Atomik.getQueryParameterByName("atk-debug-pb")&&e[o].setAttribute("atomik-pl","atomik/ydqr669bcrqfe48xiwwtcg7nj");var n=e[o].getAttribute("atomik-pl");if(-1===a.indexOf(n)){"atomik/ydqr669bcrqfe48xiwwtcg7nj"!=n&&a.push(n);var r="privatePassbackCallback"+o;Atomik[r]="<script>window.top.Atomik.getInstance().consoleLog(\"ATOMIKSDK PASSBACK ON PLACEMENT: "+n+"\");window.top.Atomik.getInstance().createSpotXTag(\""+n+"\");</script>";var l="privateZodiakPassbackCallback"+o;Atomik[l]="<script>window.top.Atomik.getInstance().consoleLog(\"ATOMIKSDK PASSBACK ON ZODIAK: "+n+"\");window.top.Atomik.getInstance().createSpotXTag(\""+n+"\");</script>";var m={placement:n,placement_name:null,targetImage:e[o],passbackName:r,zodiakPassbackName:l,clusters:null,clusterLabels:null,adTagID:null,alreadyInView:!1,adContainer:null,semanticEnabled:!1,semanticClusters:null,semanticBrandSafety:null,objects:null,celebrities:null,semanticRetryCount:3,zodiakTag:null,pt1:null,pt8:null,pt9:null,zodiakTagId:null,sizes:null,spotxTag:null,closed:!1};this.ads.push(m),"www.commentimemorabili.it"!=window.location.hostname&&"www.vanityfair.it"!=window.location.hostname&&"www.subito.it"!=window.location.hostname?"IMG"==e[o].tagName?this.getClustersForImg(e[o]):this.getAdTagForImg(e[o]):this.getAdTagForImg(e[o])}else this.consoleLog("ATOMIKSDK SKIP ALREADY USED PLACEMENT")}},Atomik.prototype.getClustersForImg=function(e){var t="";t=this.sanitizeImgUrl(e.src);var n=Atomik.md5(t),a=this,i=this.wsBaseURL+"?method=get_clusters",o=new XMLHttpRequest;o.open("POST",i,!0),o.onreadystatechange=function(){if(4===o.readyState){if(200===o.status||202===o.status){var t=o.responseText;a.consoleLog("ATOMIKSDK GET-CLUSTERS RESPONSE FOR IMAGE ["+e.src+"]: "+t),"function"==typeof atomikImageClusterReady&&atomikImageClusterReady(t);try{var n=JSON.parse(t),s=a.getAdSlotFromImage(e);if(s.clusters=n,s.clusters.tensorflow&&0<s.clusters.tensorflow.length){for(var n=[],r=.4,l=0;l<s.clusters.tensorflow.length;l++)-1===n.indexOf(s.clusters.tensorflow[l].label)&&s.clusters.tensorflow[l].score>r&&n.push(s.clusters.tensorflow[l].label);for(var m,l=0;l<s.clusters.tensorflow.length;l++)if(s.clusters.tensorflow[l].score>r)for(var d in m=s.clusters.tensorflow[l].treemap,m)-1===n.indexOf(m[d])&&n.push(m[d]);0<n.length&&(s.clusterLabels=n)}if(0<s.clusters.objects.length){for(var c=[],p=null,g=null,f=null,h=null,u=null,y=null,l=0;l<s.clusters.objects.length;l++){p=s.clusters.objects[l].label,g=s.clusters.objects[l].score,f=s.clusters.objects[l].xmin,h=s.clusters.objects[l].ymin,u=s.clusters.objects[l].xmax,y=s.clusters.objects[l].ymax;var w=(p in c);w?(new_w=100*(u-f),new_h=100*(y-h),old_w=100*(c[p].xmax-c[p].xmax),old_h=100*(c[p].ymax-c[p].xmin),new_w*new_h>old_w*old_h&&(c[p]={score:g,xmin:f,ymin:h,xmax:u,ymax:y})):c[p]={score:g,xmin:f,ymin:h,xmax:u,ymax:y}}s.objects=c}if(s.clusters.celebrities&&0<s.clusters.celebrities.length){for(var E=[],b=null,l=0;l<s.clusters.celebrities.length;l++){b=s.clusters.celebrities[l].name;var w=E.includes(b);w||E.push(b)}s.celebrities=E}if(null!==a.admantxClusters)s.semanticClusters=a.admantxClusters;else if(0<s.clusters.admantx.length){for(var v=[],p=null,g=null,l=0;l<s.clusters.admantx.length;l++)p=s.clusters.admantx[l].label,g=s.clusters.admantx[l].score,-1===v.indexOf(p)&&v.push({name:p,score:g});s.semanticClusters=v,a.admantxClusters=v}if(null!==a.brandProtectionCluster)s.semanticClusters=a.brandProtectionCluster;else if(0<s.clusters.brandProtection.length){var k=[];p=null,g=null;for(var l=0;l<s.clusters.brandProtection.length;l++)-1===k.indexOf(s.clusters.brandProtection[l])&&(p=s.clusters.brandProtection[l].label,g=s.clusters.brandProtection[l].score,k.push({name:p,score:g}));s.semanticBrandSafety=k,a.brandProtectionCluster=k}}catch(e){a.consoleLog("ATOMIKSDK GET-CLUSTERS ERROR: "+e.message)}}else a.consoleLog("ATOMIKSDK GET-CLUSTERS ERROR: "+o.status+" - "+o.statusText);a.recordClustersOnPlacementEventForImage(e),a.getAdTagForImg(e)}};var s=JSON.stringify({image_url_hash:n});o.send(s)},Atomik.prototype.getAdTagForImg=function(e){var t={atomik_placement:e.getAttribute("atomik-pl"),force_cache_update:null!==Atomik.getQueryParameterByName("atk-debug")},n=this,a=this.wsBaseURL+"?method=get_placement_info",i=new XMLHttpRequest;i.open("POST",a,!0),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||202===i.status){var t=n.getAdSlotFromImage(e),a=i.responseText;try{var o=JSON.parse(a),s=o.adtags;if(s){var r=s.adform;if(r&&0<r.length){t.adTagID=r[0],t.semanticEnabled=o.semantic_enabled,t.placement_name=o.placement_name;var l=s.ozdigital;if(l&&0<l.length){var m=l[0],d="728x90",c="[1,1],[728,90],[720,240]",p="";s.adex&&s.adex.length&&(p=s.adex[0]),Atomik.isMobile()&&(d+="_320x50",c+=",[320,50]"),1.5<e.offsetHeight/e.offsetWidth&&(d+="_320x100",c+=",[320,100]"),d+="_970x250",c+=",[970,250]",Atomik.testCheck()&&(c="[1,1]"),t.pt1="window.top.Atomik.".concat(t.zodiakPassbackName),t.pt8="["+c+"]",t.pt9=d,t.sizes="["+c+"]",t.zodiakTagId=m,t.adexTagId=p,t.zodiakTag="https://secure.adnxs.com/ttj?id=".concat(m,"&size=1x1&promo_sizes=").concat("720x240,728x90","&promo_alignment=center&pt9=").concat(d,"&pt8=[").concat(c,"]&pt1=window.top.Atomik.").concat(t.zodiakPassbackName)}var g=s.spotx;g&&0<g.length&&(t.spotxTag=g[0])}else n.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: NO VALID TAG")}else n.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: NO VALID TAG")}catch(e){n.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: "+e.message)}if(!0===Atomik.subitoCheck()){var f=Atomik.getSubitoSemantics();for(var h in t.clusterLabels=[],f)t.clusterLabels.push(f[h].name);n.recordCustomClustersForImage(e,f)}t.semanticEnabled?n.getSemanticForImg(e):n.createAdContainerOnImage(e)}else n.consoleLog("ATOMIKSDK GET-AD-TAG ERROR: "+i.status+" - "+i.statusText)};var o=JSON.stringify(t);i.send(o)},Atomik.prototype.getSemanticForImg=function(e){var t=window.location.search.substring(1).split("&"),n=t.find(function(e){return e.includes("fbclid")}),a=window.location.href;if(n!==void 0){if(1<t.length){var i=t.indexOf(n);n=i===t.length-1?"&"+n:n+"&"}a=a.replace(n,""),1===t.length&&(a=a.slice(0,-1))}var o={key:"b93bdb1b311bb646d6b138b12c5ec3949a91f532dd0992968bdcaf3ef94c183f",method:"descriptor",mode:"async",decorator:"json",type:"url",filter:["categories","admants","feelings","entities"],body:encodeURIComponent(a)},s=this.getAdSlotFromImage(e);if(null!=s.semanticClusters||null!=s.semanticBrandSafety){var r=this;r.createAdContainerOnImage(e)}else if(this.semanticObjectRequested)this.addSemanticOnImgDelayed(e);else{this.semanticObjectRequested=!0;var r=this,l="https://euasync01.admantx.com/admantx/service"+"?request="+JSON.stringify(o),m=new XMLHttpRequest;m.open("GET",l,!0),m.onreadystatechange=function(){if(4===m.readyState){if(200===m.status){var t=m.responseText;r.consoleLog("ATOMIKSDK GET-SEMANTIC RESPONSE: "+t);try{var n=JSON.parse(t);"OK"==n.valid?(r.semanticObjectForPage=n,r.addSemanticOnImg(e)):r.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: NO VALID RESPONSE")}catch(e){r.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: "+e.message)}}else r.consoleLog("ATOMIKSDK GET-SEMANTIC ERROR: "+m.status+" - "+m.statusText);r.createAdContainerOnImage(e)}},m.send()}},Atomik.prototype.recordCustomClustersForImage=function(e,t){var n=this.getAdSlotFromImage(e);if(null==t)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 4 NO CLUSTERS FOR IMAGE ["+e.src+"]");for(var a=e.firstElementChild.firstElementChild.firstElementChild.src,o=[],s=0;s<t.length;s++){var r=t[s],l={label:Atomik.sanitizeCustomCluster(r.name).toLowerCase(),score:r.score/100};o.push(l)}var m={src_page_uri:window.location.href,event_type:4,image_url:a,clusters:o},d=this,c=this.wsBaseURL+"?method=record_event",p=new XMLHttpRequest;p.open("POST",c,!0),p.onreadystatechange=function(){4===p.readyState&&(200===p.status||202===p.status?d.consoleLog("ATOMIKSDK RECORD-EVENT 4 SUCCESS FOR PLACEMENT ["+n.placement+"]"):d.consoleLog("ATOMIKSDK RECORD-EVENT 4 ERROR: "+p.status+" - "+p.statusText))};var g=JSON.stringify(m);p.send(g)},Atomik.prototype.addSemanticOnImg=function(e){if(null!==this.semanticObjectForPage){var t=this.getAdSlotFromImage(e);void 0===this.semanticObjectForPage.entities&&(this.semanticObjectForPage.categories=[]),void 0===this.semanticObjectForPage.feelings&&(this.semanticObjectForPage.feelings=[]),void 0===this.semanticObjectForPage.entities&&(this.semanticObjectForPage.entities=[]),t.semanticClusters=this.semanticObjectForPage.categories.concat(this.semanticObjectForPage.feelings.concat(this.semanticObjectForPage.entities)),t.semanticBrandSafety=this.semanticObjectForPage.admants,this.recordSemanticClustersForImage(e)}},Atomik.prototype.addSemanticOnImgDelayed=function(e){var t=this.getAdSlotFromImage(e),n=this;null===this.semanticObjectForPage?(t.semanticRetryCount-=1,0<t.semanticRetryCount?setTimeout(function(){n.addSemanticOnImgDelayed(e)},200):n.createAdContainerOnImage(e)):(this.consoleLog("ATOMIKSDK GET-SEMANTIC CACHED FOR PAGE"),this.addSemanticOnImg(e),n.createAdContainerOnImage(e))},Atomik.prototype.createAdContainerOnImage=function(e){var t=this,n=jQuery(e),a=this.getAdSlotFromImage(e);this.consoleLog("ATOMIKSDK CREATE AD CONTAINER ON PLACEMENT ["+a.placement+"]");var i=document.createElement("div");i.id="atk-ad-"+Math.round(1e4*Math.random());var o=jQuery(i),s=n.parent();if(s.is("div")){var r=s.css("position");(r===void 0||"static"==r)&&s.css("position","relative")}o.insertAfter(n),a.adContainer=i,t.recordSDKReadyEventForPlacement(e),o.css({position:"absolute",border:"none",display:"block",margin:n.css("margin"),padding:n.css("padding")});var l=n.css("zIndex");l!==void 0&&"auto"!==l&&o.css("zIndex",l+1),t.setAdContainerPosition(i,e);var m;Atomik.sportNetworkMobileCheck()?m="#"+i.id+" iframe:first-child {position: absolute !important; bottom: 0 !important; top:auto!important; height:40%!important;} ":Atomik.ItaliaOnRoadCheck()&&(m="#"+i.id+" > div > div > iframe {margin-top:0!important;}"),Atomik.injectStyles(m),n.mutate("width height top left bottom right offsetTop offsetLeft",function(){t.consoleLog("ATOMIKSDK MUTATE"),t.setAdContainerPosition(i,e),jQuery.inviewport(e,{threshold:0,container:window})&&t.checkImgInView(i,e)}),n.inView(function(){t.checkImgInView(i,e)})},Atomik.prototype.setAdContainerPosition=function(e,t){var n=jQuery(e),a=jQuery(t);if(Atomik.rcsCheck()){var i=a.siblings(".didascalia_img"),o=0;i!==void 0&&null!==i&&"none"!=i.css("display")&&(o=i.outerHeight()-1),n.css({top:a.position().top,left:a.position().left,bottom:a.position().bottom-o,right:a.position().right,margin:a.css("margin"),padding:a.css("padding")}),n.width(a.width()),n.height(a.height()-o)}else{n.css({top:a.position().top,left:a.position().left,bottom:a.position().bottom,right:a.position().right,margin:a.css("margin"),padding:a.css("padding")}),n.width(a.width());var s=$(".thumbnails").height()+parseInt($(".thumbnails").css("padding-top"))+parseInt($(".thumbnails").css("padding-bottom"));s=isNaN(s)?0:s,n.height(a.height()-s)}},Atomik.prototype.removeZIndexFromImage=function(e){var t=this.ads[e];if(null!=t&&null!=t.adContainer){var n=jQuery(t.adContainer);n.css({zIndex:0})}},Atomik.prototype.checkImgInView=function(e,t){var n=this.getAdSlotFromImage(t);if(!0!=n.alreadyInView&&(n.alreadyInView=!0,this.consoleLog("ATOMIKSDK IMAGE IN-VIEW ["+t.src+"]"),null!=n.adTagID)){if(null!=n.zodiakTag){var a=!1;if(n.semanticBrandSafety&&(a=a||n.semanticBrandSafety.some(function(e){return"crimes"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"parental_protection"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"weaponry_and_military"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"accidents"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"alcohol_and_tobacco"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"illegal_drugs"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"natural_disasters"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"terrorism"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"illegal_download"===e.name}),a=a||n.semanticBrandSafety.some(function(e){return"illegal_streaming"===e.name})),Atomik.astCheck()){var i=this.addClustersOnTagAST(n,"","atomik_qskw"),o="";""!=n.adexTagId&&(o="pt7: '"+n.adexTagId+"',"),Atomik[n.passbackName]="\n         <script type=\"text/javascript\">\n         var apntag = apntag || {};\n         apntag.anq = apntag.anq || [];\n         (function () {\n         var d = document,\n         e = d.createElement(\"script\"),\n         p = d.getElementsByTagName(\"head\")[0];\n         e.type = \"text/javascript\";\n         e.async = true;\n         e.src = \"//acdn.adnxs.com/ast/ast.js\";\n         p.insertBefore(e, p.firstChild);\n         })();\n         \n         apntag.anq.push(function () {\n         apntag.setPageOpts({\n         member: 956,\n         keywords: {\n         atomik_qskw: \"".concat(i,"\",\n         pt9: \"").concat(n.pt9,"\",\n         pt8: \"").concat(n.pt8,"\",\n         ").concat(o,"\n         pt1: \"").concat(n.pt1,"\",\n         },\n         });\n         \n         apntag.defineTag({\n         tagId: ").concat(n.zodiakTagId,",\n         sizes: ").concat(n.sizes,",\n         targetId: \"atomik-container\",\n         });\n         \n         apntag.loadTags();\n         });\n         </script>\n         <div id=\"atomik-container\" style=\"opacity: 0;\">\n         <script type=\"text/javascript\">\n                        try {\n            apntag.anq.push(function () {\n                apntag.showTag(\"atomik-container\");\n                apntag.onEvent('adLoaded', 'atomik-container', function (adError, adObj) {\n                    var tag = apntag.getTag('atomik-container');\n                    var hinterval = setInterval(function () {\n                        var apniFrame = document.getElementById(tag.utiframeId).contentWindow.document;\n                        var h_banner = apniFrame.body.offsetHeight;\n                        if (h_banner > 20 && h_banner !== undefined && apniFrame.getElementsByTagName('div')[1].getElementsByTagName('iframe').length) {\n         //   console.log(apniFrame.getElementsByTagName('div')[1].getElementsByTagName('iframe')[0].offsetWidth);\n                            var w_banner = apniFrame.getElementsByTagName('div')[1].getElementsByTagName('iframe')[0].offsetWidth;\n                            if(w_banner<20){\n                                w_banner = apniFrame.getElementsByTagName('div')[1].getElementsByTagName('iframe')[0].contentWindow.document.getElementById('native-container').offsetWidth;\n                            }\n                            if(w_banner>20){\n                            if(h_banner == 150)\n                                h_banner = 80;\n                  //      console.log(\"Resize: \"+w_banner+' '+h_banner);\n                                apntag.resizeAd('atomik-container', [w_banner, h_banner]);\n                                clearInterval(hinterval);\n                            }\n                        }\n                    }, 250)\n                });\n            });\n           } catch (e) {\n                console.log(e);\n            }\n        </script>\n<script>\n                 var external_container = window.frameElement.parentElement;\n                 /*var external_observerOptions = {childList: true,attributes: true,subtree: true};\n                 var external_observer = new MutationObserver(onResizeEvent); \n                 external_observer.observe(external_container, external_observerOptions);*/\n                 \n                 var element = document.getElementById(\"atomik-container\");\n                 var closeSetted = false;\n                 var observerOptions = {childList: true,attributes: true,subtree: true};\n                 var observer = new MutationObserver(onResizeEvent); \n                 observer.observe(element, observerOptions);\n                 function onResizeEvent(){\n                    var creativeIframeContainer = document.querySelector('[id^=\"google_ads_iframe_\"] iframe')\n                    var creativeRecallContainer = document.querySelector('[id^=\"adform-adbox-\"]');\n                    if(creativeRecallContainer && creativeRecallContainer.offsetWidth === 1){\n                        \n                        //Unset property\n                        window.frameElement.style.setProperty(\"width\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"unset\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.transform = \"unset\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        window.frameElement.style.marginTop = \"unset\";\n                        \n                        //Set property\n                        window.frameElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        element.style.setProperty(\"height\", \"100%\", \"important\");;\n                        element.style.setProperty(\"width\", \"100%\", \"important\");;\n                        element.style.opacity = \"1\";\n                    }else \n                        if(element.offsetWidth == 970 && element.offsetHeight == 250 && (window.frameElement.parentElement.offsetHeight/window.frameElement.parentElement.offsetWidth)<0.9){\n                            var imgWidth = window.frameElement.parentElement.offsetWidth;\n                            var imgHeight = window.frameElement.parentElement.offsetHeight;\n                            var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                            window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                            var scaleFactor = (imgHeight / 3) / element.offsetHeight;\n                            window.frameElement.style.transform = \"scale3d(\" + scaleFactor + \", \" + scaleFactor + \", 1)\";\n                            window.frameElement.style.transformOrigin = \"0 0\";\n                            window.frameElement.style.setProperty(\"margin-top\", parseInt(imgHeight - element.offsetHeight*scaleFactor) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"margin-left\", parseInt((imgWidth - element.offsetWidth*scaleFactor)/2) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                            window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                            window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                            if(!closeSetted && element.offsetWidth !== 720){\n                            var div = document.createElement(\"img\"); div.src=\"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\"; div.style.height = \"25px\"; div.style.position = \"absolute\"; div.style.left = \"0px\"; div.style.top = \"0px\";  div.style.cursor = \"pointer\";\n                            element.appendChild(div); div.addEventListener(\"click\", function(){\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(n.placement,"\");\n                            }); \n                            closeSetted = true;\n                        }\n                            element.style.opacity = \"1\";\n                            \n                    }else if(element.offsetWidth > 650){\n                        /*if(creativeIframeContainer.offsetWidth === 720 || element.offsetWidth === 720){\n                            closeSetted = true;\n                        }*/\n                        var imgWidth = window.frameElement.parentElement.offsetWidth;\n                        var imgHeight = window.frameElement.parentElement.offsetHeight;\n                        var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                        window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.marginTop = parseInt(imgHeight - frameHeight) + \"px\";\n                        window.frameElement.style.transform = \"scale3d(\" + imgWidth/element.offsetWidth + \", \" + imgWidth/element.offsetWidth + \", 1)\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        if(!closeSetted && element.offsetWidth !== 720){\n                            var div = document.createElement(\"img\"); div.src=\"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\"; div.style.height = \"25px\"; div.style.position = \"absolute\"; div.style.left = \"0px\"; div.style.top = \"0px\";  div.style.cursor = \"pointer\";\n                            element.appendChild(div); div.addEventListener(\"click\", function(){\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(n.placement,"\");\n                            }); \n                            closeSetted = true;\n                        }\n                        element.style.opacity = \"1\";\n                    }else if (element.offsetWidth == 192){\n                        apntag.resizeAd('atomik-container', [window.frameElement.parentNode.offsetWidth, window.frameElement.parentNode.offsetHeight]);\n                        closeSetted = true;\n                        var imgWidth = window.frameElement.parentElement.offsetWidth;\n                        var imgHeight = window.frameElement.parentElement.offsetHeight;\n                        var frameWidth = element.offsetWidth;\n                        var frameHeight = element.offsetHeight;\n                        window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        var scaleFactor = imgHeight / element.offsetHeight;\n                        if(scaleFactor>2)\n                            scaleFactor = 1.7;\n                        var iframeContainer = document.getElementById('div_utif_atomik-container').getElementsByTagName('iframe')[0].contentWindow.document;\n                        iframeContainer.body.style.setProperty(\"height\", \"100%\", \"important\");\n                        iframeContainer.body.style.setProperty(\"width\", \"100%\", \"important\");\n                        iframeContainer.getElementsByTagName('html')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        iframeContainer.getElementsByTagName('html')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        container1 = iframeContainer.querySelector('[id^=\"gpt_unit_\"]');\n                        container2 = iframeContainer.querySelector('[id^=\"google_ads_iframe_\"]');\n                        container3 = iframeContainer.querySelector('[id^=\"adform-adbox-\"]');\n                        container1.style.setProperty(\"width\", \"100%\", \"important\");\n                        container1.style.setProperty(\"height\", \"100%\", \"important\");\n                        container2.style.setProperty(\"width\", \"100%\", \"important\");\n                        container2.style.setProperty(\"height\", \"100%\", \"important\");\n                        container3.style.setProperty(\"width\", \"100%\", \"important\");\n                        container3.style.setProperty(\"height\", \"100%\", \"important\");\n                    //    window.frameElement.style.setProperty(\"height\", \"100%\", \"important\");\n                   //     window.frameElement.style.setProperty(\"width\", \"100%\", \"important\");\n                   //     window.frameElement.style.setProperty(\"margin-top\", parseInt((imgHeight - element.offsetHeight*scaleFactor)) + \"px\", \"important\");\n                   //     window.frameElement.style.setProperty(\"margin-left\", parseInt((imgWidth - element.offsetWidth*scaleFactor)/2) + \"px\", \"important\");\n                   //     window.frameElement.style.transform = \"scale3d(\" + scaleFactor + \", \" + scaleFactor + \", 1)\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        element.style.opacity = \"1\";\n                        if (!closeSetted && element.offsetWidth !== 720) {\n                            var div = document.createElement(\"img\");\n                            div.src = \"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\";\n                            div.style.height = \"25px\";\n                            div.style.position = \"absolute\";\n                            div.style.right = \"0px\";\n                            div.style.top = \"0px\";\n                            div.style.cursor = \"pointer\";\n                            div.style.zIndex = 999999;\n                            element.appendChild(div);\n                            div.addEventListener(\"click\", function () {\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(n.placement,"\");\n                            });\n                            closeSetted = true;\n                        }\n                    }\n                \n                }\n            </script>\n         </div>\n\n         ")}else a||(n.zodiakTag=this.addClustersOnTag(n,n.zodiakTag,"atomik_qskw"),Atomik[n.passbackName]="\n            <script type=\"text/javascript\">\n                window.placement_name = \"".concat(n.placement_name,"\";\n            </script>\n            <div id=\"atomik-container\" style=\"opacity: 0\"><SCRIPT SRC=\"").concat(n.zodiakTag,"\" TYPE=\"text/javascript\"></SCRIPT>\n            <script>\n                 var external_container = window.frameElement.parentElement;\n                 /*var external_observerOptions = {childList: true,attributes: true,subtree: true};\n                 var external_observer = new MutationObserver(onResizeEvent); \n                 external_observer.observe(external_container, external_observerOptions);*/\n                 \n                 var element = document.getElementById(\"atomik-container\");\n                 var closeSetted = false;\n                 var observerOptions = {childList: true,attributes: true,subtree: true};\n                 var observer = new MutationObserver(onResizeEvent); \n                 observer.observe(element, observerOptions);\n                 function onResizeEvent(){\n                    var creativeIframeContainer = document.querySelector('[id^=\"google_ads_iframe_\"] iframe')\n                    var creativeRecallContainer = document.querySelector('[id^=\"adform-adbox-\"]');\n                    if(creativeRecallContainer && creativeRecallContainer.offsetWidth === 1){\n                        \n                        //Unset property\n                        window.frameElement.style.setProperty(\"width\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"unset\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.transform = \"unset\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        window.frameElement.style.marginTop = \"unset\";\n                        \n                        //Set property\n                        window.frameElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('html')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"height\", \"100%\", \"important\");\n                        document.getElementsByTagName('body')[0].style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"height\", \"100%\", \"important\");\n                        creativeRecallContainer.parentElement.parentElement.style.setProperty(\"width\", \"100%\", \"important\");\n                        \n                        element.style.setProperty(\"height\", \"100%\", \"important\");;\n                        element.style.setProperty(\"width\", \"100%\", \"important\");;\n                        element.style.opacity = \"1\";\n                    }else \n                        if(element.offsetWidth == 970 && element.offsetHeight == 250 && (window.frameElement.parentElement.offsetHeight/window.frameElement.parentElement.offsetWidth)<0.9){\n                            var imgWidth = window.frameElement.parentElement.offsetWidth;\n                            var imgHeight = window.frameElement.parentElement.offsetHeight;\n                            var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                            window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                            var scaleFactor = (imgHeight / 3) / element.offsetHeight;\n                            window.frameElement.style.transform = \"scale3d(\" + scaleFactor + \", \" + scaleFactor + \", 1)\";\n                            window.frameElement.style.transformOrigin = \"0 0\";\n                            window.frameElement.style.setProperty(\"margin-top\", parseInt(imgHeight - element.offsetHeight*scaleFactor) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"margin-left\", parseInt((imgWidth - element.offsetWidth*scaleFactor)/2) + \"px\", \"important\");\n                            window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                            window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                            window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                            window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                            if(!closeSetted && element.offsetWidth !== 720){\n                            var div = document.createElement(\"img\"); div.src=\"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\"; div.style.height = \"25px\"; div.style.position = \"absolute\"; div.style.left = \"0px\"; div.style.top = \"0px\";  div.style.cursor = \"pointer\";\n                            element.appendChild(div); div.addEventListener(\"click\", function(){\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(n.placement,"\");\n                            }); \n                            closeSetted = true;\n                        }\n                            element.style.opacity = \"1\";\n                            \n                    }else if(element.offsetWidth > 650){\n                        /*if(creativeIframeContainer.offsetWidth === 720 || element.offsetWidth === 720){\n                            closeSetted = true;\n                        }*/\n                        var imgWidth = window.frameElement.parentElement.offsetWidth;\n                        var imgHeight = window.frameElement.parentElement.offsetHeight;\n                        var frameHeight = element.offsetHeight * (imgWidth/element.offsetWidth);\n                        window.frameElement.style.setProperty(\"width\", element.offsetWidth + \"px\", \"important\");\n                        window.frameElement.style.setProperty(\"height\", element.offsetHeight + \"px\", \"important\");\n                        window.frameElement.style.transformOrigin = \"0 0\";\n                        window.frameElement.style.marginTop = parseInt(imgHeight - frameHeight) + \"px\";\n                        window.frameElement.style.transform = \"scale3d(\" + imgWidth/element.offsetWidth + \", \" + imgWidth/element.offsetWidth + \", 1)\";\n                        window.frameElement.style.setProperty(\"bottom\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"top\", \"unset\", \"important\");\n                        window.frameElement.style.setProperty(\"position\", \"absolute\", \"important\");\n                        window.frameElement.style.setProperty(\"left\", \"0\", \"important\");\n                        window.frameElement.style.setProperty(\"max-width\", \"unset\", \"important\");\n                        if(!closeSetted && element.offsetWidth !== 720){\n                            var div = document.createElement(\"img\"); div.src=\"https://atomikad.com/img/close.png\";\n                            div.style.width = \"25px\"; div.style.height = \"25px\"; div.style.position = \"absolute\"; div.style.left = \"0px\"; div.style.top = \"0px\";  div.style.cursor = \"pointer\";\n                            element.appendChild(div); div.addEventListener(\"click\", function(){\n                                element.style.display = \"none\";\n                                window.top.atomikInst.setClosedPl(\"").concat(n.placement,"\");\n                            }); \n                            closeSetted = true;\n                        }\n                        element.style.opacity = \"1\";\n                    }\n                }\n            </script>\n            </div>"))}var s="adx.adform.net/adx/?rnd="+Math.random();s+=null===Atomik.getQueryParameterByName("atk-pb")?"&mid="+n.adTagID:"&mid=12398456",s+="&pbvar=Atomik."+n.passbackName,s=this.addClustersOnTag(n,s,"mkv");var r=jQuery(t);s+=r.width()>=r.height()?"&mkv=ImgOrientation:horizontal":"&mkv=ImgOrientation:vertical";var l=t.offsetWidth*t.offsetWidth;75000>l&&(s+="&mkv=metrics:small"),75000<=l&&158400>l&&(s+="&mkv=metrics:medium"),158400<=l&&(s+="&mkv=metrics:large"),Atomik.sponsoredCheckTestVideo()&&(s+="&mkv=check:test_video"),Atomik.testCheck()&&(s+="&mkv=check:sbt_test"),this.consoleLog("ATOMIKSDK LOAD AD FROM TAG FOR IMAGE ["+t.src+"]: "+s),this.recordInViewEventForPlacement(t);var m="<script data-adfscript=\""+s+"\"></script><script src=\"//s1.adform.net/banners/scripts/adx.js\" async defer></script>";Atomik.postscribe(e,m);var d=Atomik.reloadList();if(n.placement in d){var c=this;setTimeout(function(){c.reloadAdTag(e,n,m)},1e3*d[n.placement])}}},Atomik.prototype.addClustersOnTag=function(e,t,n){var a=!1;if(e.semanticClusters&&0<e.semanticClusters.length)for(var o=0;o<e.semanticClusters.length;o++)try{var s="adx_"+e.semanticClusters[o].name.toLowerCase().replace(/ /g,"_");"mkv"===n&&(s="admantx:"+s),a?t+=","+encodeURI(s):(t+="&"+n+"="+encodeURI(s),a=!0)}catch(e){}var a=!1;if(e.semanticBrandSafety&&0<e.semanticBrandSafety.length)for(var o=0;o<e.semanticBrandSafety.length;o++)try{var s="adx_bs_"+e.semanticBrandSafety[o].name.toLowerCase().replace("brand protection - ","").replace(/ /g,"_");"mkv"===n&&(s="brand_protection:"+s),a?t+=","+encodeURI(s):(t+="&"+n+"="+encodeURI(s),a=!0)}catch(e){}var a=!1;if(e.clusterLabels&&0<e.clusterLabels.length)for(var r="",o=0;o<e.clusterLabels.length;o++)r=Atomik.subitoCheck()?"sbt_"+e.clusterLabels[o]:e.clusterLabels[o],"mkv"===n&&(r="tensorflow:"+r),r=r.replace(/,/g,";"),a?t+=","+encodeURI(r):(t+="&"+n+"="+encodeURI(r),a=!0);if(a=!1,e.objects&&0<Object.keys(e.objects).length)for(var l,o=0;o<Object.keys(e.objects).length;o++){l="obj_"+Object.keys(e.objects)[o],"mkv"===n&&(l="obj_det:"+l);try{a?t+=","+encodeURI(l):(t+="&"+n+"="+encodeURI(l),a=!0)}catch(e){}}var a=!1;if(e.celebrities&&0<e.celebrities.length)for(var m="",o=0;o<e.celebrities.length;o++)m=e.celebrities[o],"mkv"===n&&(m="celebrities:"+m),m=m.replace(/ /g,"_"),a?t+=","+encodeURI(r):(t+="&"+n+"="+encodeURI(m),a=!0);return t},Atomik.prototype.addClustersOnTagAST=function(e,t,n){var a=!1;if(e.semanticClusters&&0<e.semanticClusters.length)for(var o=0;o<e.semanticClusters.length;o++)try{var s="adx_"+e.semanticClusters[o].name.toLowerCase().replace(/ /g,"_");"mkv"===n&&(s="admantx:"+s),a?t+=","+encodeURI(s):(t+="&"+n+"="+encodeURI(s),a=!0)}catch(e){}if(e.semanticBrandSafety&&0<e.semanticBrandSafety.length)for(var o=0;o<e.semanticBrandSafety.length;o++)try{var s="adx_bs_"+e.semanticBrandSafety[o].name.toLowerCase().replace("brand protection - ","").replace(/ /g,"_");"mkv"===n&&(s="brand_protection:"+s),a?t+=","+encodeURI(s):(t+="&"+n+"="+encodeURI(s),a=!0)}catch(e){}if(e.clusterLabels&&0<e.clusterLabels.length)for(var r="",o=0;o<e.clusterLabels.length;o++)r=Atomik.subitoCheck()?"sbt_"+e.clusterLabels[o]:e.clusterLabels[o],"mkv"===n&&(r="tensorflow:"+r),r=r.replace(/,/g,";"),a?t+=","+encodeURI(r):(t+="&"+n+"="+encodeURI(r),a=!0);if(e.objects&&0<Object.keys(e.objects).length)for(var l,o=0;o<Object.keys(e.objects).length;o++){l="obj_"+Object.keys(e.objects)[o],"mkv"===n&&(l="obj_det:"+l);try{a?t+=","+encodeURI(l):(t+=encodeURI(l),a=!0)}catch(e){}}if(e.celebrities&&0<e.celebrities.length)for(var m="",o=0;o<e.celebrities.length;o++)m=e.celebrities[o],"mkv"===n&&(m="celebrities:"+m),m=m.replace(/ /g,"_"),a?t+=","+encodeURI(r):(t+=encodeURI(m),a=!0);return t},Atomik.prototype.createSpotXTag=function(e){var t=this.getAdSlotFromPlacement(e);if(null==t.spotxTag)return void(window.top.Atomik.getInstance().passbackExternalCallback&&window.top.Atomik.getInstance().passbackExternalCallback(e,""));var n=t.adContainer,a=t.spotxTag,i=n.id,o=document.createElement("script");o.type="text/javascript",o.src="//js.spotx.tv/easi/v1/"+a+".js",o.setAttribute("data-spotx_channel_id",a),o.setAttribute("data-spotx_ad_unit","instream"),o.setAttribute("data-spotx_autoplay","1"),o.setAttribute("data-spotx_blocked_autoplay_override_mode","1"),o.setAttribute("data-spotx_ad_volume","0"),o.setAttribute("data-spotx_ad_skippable","1"),o.setAttribute("data-spotx_ad_skip_delay","5"),o.setAttribute("data-spotx_content_type","other"),o.setAttribute("data-spotx_content_page_url",encodeURI(window.location.href));var s=jQuery(n).width(),r=jQuery(n).height();o.setAttribute("data-spotx_content_width",s),o.setAttribute("data-spotx_content_height",r),o.setAttribute("data-spotx_ad_done_function","privateSpotXPassback"),o.setAttribute("data-spotx_content_container_id",i),n.appendChild(o)},Atomik.prototype.recordClustersOnPlacementEventForImage=function(e){var t=this.getAdSlotFromImage(e);if(null==t.clusterLabels)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 0 NO CLUSTERS FOR PLACEMENT ["+t.placement+"]");var n=e.getAttribute("atomik-pl");if(null==n)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 0 NO PLACEMENT FOR TARGET ["+e+"]");var a="";a=Atomik.subitoCheck()?this.sanitizeImgUrl(e.firstElementChild.src):this.sanitizeImgUrl(e.src);var i=Atomik.md5(a),o={event_type:0,image_url_hash:i,atomik_placement:n,clusters:t.clusterLabels},s=this,r=this.wsBaseURL+"?method=record_event",l=new XMLHttpRequest;l.open("POST",r,!0),l.onreadystatechange=function(){4===l.readyState&&(200===l.status||202===l.status?s.consoleLog("ATOMIKSDK RECORD-EVENT 0 SUCCESS FOR PLACEMENT ["+n+"]"):s.consoleLog("ATOMIKSDK RECORD-EVENT 0 ERROR: "+l.status+" - "+l.statusText))};var m=JSON.stringify(o);l.send(m)},Atomik.prototype.recordSDKReadyEventForPlacement=function(e){var t=e.getAttribute("atomik-pl");if(null==t)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 1 NO PLACEMENT FOR IMAGE ["+e.src+"]");var n=this,a=this.wsBaseURL+"?method=record_event&cb="+Math.random(),i=new XMLHttpRequest;i.open("POST",a,!0),i.onreadystatechange=function(){4===i.readyState&&(200===i.status||202===i.status?n.consoleLog("ATOMIKSDK RECORD-EVENT 1 SUCCESS FOR PLACEMENT ["+t+"]"):n.consoleLog("ATOMIKSDK RECORD-EVENT 1 ERROR: "+i.status+" - "+i.statusText))};var o=JSON.stringify({event_type:1,atomik_placement:t});i.send(o)},Atomik.prototype.recordInViewEventForPlacement=function(e){var t=e.getAttribute("atomik-pl");var n=this,a=this.wsBaseURL+"?method=record_event&cb="+Math.random(),i=new XMLHttpRequest;var o=JSON.stringify({event_type:2,atomik_placement:t})},Atomik.prototype.recordSemanticClustersForImage=function(e){var t=this.getAdSlotFromImage(e);if(null==t.semanticClusters&&null==t.semanticBrandSafety)return void this.consoleLog("ATOMIKSDK RECORD-EVENT 3 NO CLUSTERS FOR IMAGE ["+e.src+"]");var n=this.sanitizeImgUrl(e.src),a=Atomik.md5(n),o=[];if(t.semanticClusters)for(var s=0;s<t.semanticClusters.length;s++){var r=t.semanticClusters[s],l={label:r.name.toLowerCase(),score:r.score/100};o.push(l)}var m=[];if(t.semanticBrandSafety)for(var s=0;s<t.semanticBrandSafety.length;s++){var d=t.semanticBrandSafety[s],c={label:d.name.toLowerCase().replace("brand protection - ",""),score:d.score/100};m.push(c)}var p={event_type:3,image_url_hash:a,content_url:window.location.href,clusters:o,brand_protections:m},g=this,f=this.wsBaseURL+"?method=record_event",h=new XMLHttpRequest;h.open("POST",f,!0),h.onreadystatechange=function(){4===h.readyState&&(200===h.status||202===h.status?g.consoleLog("ATOMIKSDK RECORD-EVENT 3 SUCCESS FOR PLACEMENT ["+t.placement+"]"):g.consoleLog("ATOMIKSDK RECORD-EVENT 3 ERROR: "+h.status+" - "+h.statusText))};var u=JSON.stringify(p);h.send(u)},Atomik.prototype.getAllElementsWithAttribute=function(e){var t=[],a=document.querySelectorAll("["+e+"]");if(-1!=window.location.hostname.indexOf("www.corrieredellosport.it")||-1!=window.location.hostname.indexOf("www.tuttosport.com")){var o=Math.ceil(100*Math.random()),s=document.getElementsByClassName("foto-slider__slide").length;if(8<s&&30>o&&"DIV"==a[0].tagName)t.push(a[0]);else for(var r=0,l=a.length;r<l;r++)null!==a[r].getAttribute(e)&&"IMG"==a[r].tagName&&t.push(a[r])}else for(var r=0,l=a.length;r<l;r++)null!==a[r].getAttribute(e)&&t.push(a[r]);return t},Atomik.prototype.getAdSlotFromImage=function(e){for(var t=null,n=0;n<this.ads.length;n++)if(this.ads[n].targetImage===e){t=this.ads[n];break}return t},Atomik.prototype.getAdSlotFromPlacement=function(e){for(var t=null,n=0;n<this.ads.length;n++)if(this.ads[n].placement==e){t=this.ads[n];break}return t},Atomik.prototype.sanitizeImgUrl=function(e){var t=e.indexOf("://");if(-1==t)return e;var n=e.substring(0,t+3),a=e.substring(t+3,e.length),i=a.split("/",1)[0];if(!i)return e;if(3>i.split(".").length){return n+"www."+a}return e},Atomik.prototype.setClosedPl=function(e){var t=this.getAdSlotFromPlacement(e);t.closed=!0},Atomik.prototype.consoleLog=function(e){null!==Atomik.getQueryParameterByName("atk-debug")&&console.log(e)},Atomik.prototype.reloadAdTag=function(e,t,n){if(!1===t.closed){var a=this;for(a.consoleLog("ATOMIKSDK REFRESH AD TAG FOR PLACEMENT: "+t.placement);e.hasChildNodes();)e.removeChild(e.lastChild);Atomik.postscribe(e,n)}},Atomik.atomikPrivateInit=function(){Atomik.includeScript("https://cdn.jsdelivr.net/gh/AtomikAd/sdk/dist/core/atomik-utils.min.js",function(){Atomik.includeScript("https://cdn.jsdelivr.net/gh/AtomikAd/sdk/dist/core/atomik-postscribe.min.js",function(){atomikInst.getPlacementLessTags(),window.atomikReady&&window.atomikReady()})})},Atomik.onPassback=function(e){atomikInst&&(atomikInst.passbackExternalCallback=e)},Atomik.getQueryParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},Atomik.reloadList=function(){return{"atomik/qa23cnop0z0b7d5ztknu4tw4d":8,"atomik/cs9bqk13h4kuvj0j45gy2ttvx":8,"atomik/m40o1onp20o5rqrmunxeerltq":8,"atomik/1tcuvc3w0jz5tceqgu6yz3x84":8,"atomik/bgimhzwhfqetpibmrbk0afrkk":11,"atomik/k4g38b93fi1om5kao87mqjjet":13,"atomik/ibguzq8nhh7524pumsb1s6j77":12,"atomik/4cdv76z871wobsnjkqauzkjpl":11,"atomik/uz3qccd6dk46zg1qvfq22hfmo":13,"atomik/8xxov7guigkpq5o8uvj96skwt":12,"atomik/bvchqkzgixgu7hwaq98hzwcef":13,"atomik/xekxhaduheh4ian8f9ukkjc3i":11,"atomik/k0ku5vbeh3f66rmbsygj4m99c":11,"atomik/2d18ijbgq0nxovby0uy61sfuh":14,"atomik/rs02onsuaezurr5h6fd14r3jc":11,"atomik/rl4938w30qi71svb7vwhh39c2":11,"atomik/ymvjf7h3pfw33itjd2g2mp2q9":12,"atomik/frqvyoiezqvmvyespy426fpru":13,"atomik/qgpoq0q3zszx9n1jp24ujlf7z":10,"atomik/7lp2sap61lnvynan6t53f530y":11,"atomik/dcane43ya27yhcfiq7lascld8":10,"atomik/0c7epzuf9vw84bmj9h3blursb":10,"atomik/temjabvc32mcle46981k7g0w3":11}},Atomik.rcsCheck=function(){var e=window.location.hostname;return!(-1==e.indexOf("www.corriere.it")&&-1==e.indexOf("corriereinnovazione.corriere.it")&&-1==e.indexOf("motori.corriere.it")&&-1==e.indexOf("bergamo.corriere.it")&&-1==e.indexOf("corrieredibologna.corriere.it")&&-1==e.indexOf("roma.corriere.it")&&-1==e.indexOf("corrieredelmezzogiorno.corriere.it")&&-1==e.indexOf("brescia.corriere.it")&&-1==e.indexOf("corrierefiorentino.corriere.it"))},Atomik.isMobile=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},Atomik.fattoGallery=function(){var e=window.location.hostname;return-1!=e.indexOf("www.ilfattoquotidiano.it")&&jQuery(".FQG-nav-next").css("width","20%"),!1},Atomik.youMediaGallery=function(){var e=window.location.hostname;return-1!=e.indexOf("youmedia.fanpage.it")&&(jQuery(".showArea.right").css("width","20%"),jQuery(".gradient.js-photo-info").css("z-index","-1")),!1},Atomik.sponsoredCheckTestVideo=function(){var e=window.location.href;return-1!=e.indexOf("subito.it/accessori-auto/set-cerchi-gomme-invernali-per-renault-kadjar-monza-361699923.htm")},Atomik.testCheck=function(){var e=window.location.href;return-1!=e.indexOf("subito.it/auto/veicolo-in-buone-condizioni-con-molti-lavori-esegu-potenza-361735995.htm")},Atomik.subitoCheck=function(){var e=window.location.hostname;if(-1!=e.indexOf("subito.it")){var t=window.location.pathname;if(-1!=t.indexOf("/auto/")||-1!=t.indexOf("/moto-e-scooter/")||-1!=t.indexOf("veicoli-commerciali")||-1!=t.indexOf("caravan-e-camper"))return!0}return!1},Atomik.sportNetworkMobileCheck=function(){var e=window.location.hostname;return!(-1==e.indexOf("m.corrieredellosport.it")&&-1==e.indexOf("m.tuttosport.com"))},Atomik.astCheck=function(){var e=window.location.href;return!(-1==window.location.hostname.indexOf("subito.it")&&-1==e.indexOf("preview.atomikad.com/ast/"))},Atomik.ItaliaOnRoadCheck=function(){var e=window.location.hostname;return-1!=e.indexOf("www.italiaonroad.it")},Atomik.getSubitoSemantics=function(){var e=[];return jQuery(".vehicle-history ul li span").each(function(t,n){switch(jQuery(n).text()){case"Tipologia":e.push({name:jQuery(n).siblings().text().trim().toLowerCase(),score:100});break;case"Marca":e.push({name:jQuery(n).siblings().text().trim().toLowerCase(),score:100});break;case"Modello":e.push({name:jQuery(n).siblings().text().trim().toLowerCase(),score:100});break;case"Carburante":e.push({name:jQuery(n).siblings().text().trim().toLowerCase(),score:100});}}),e},Atomik.sanitizeCustomCluster=function(e){var t=e;return t=t.replace(/[\u00B0\u00B2\u00B3\u00B9\u02AF\u0670\u0711\u2121\u213B\u2207\u29B5\uFC5B-\uFC5D\uFC63\uFC90\uFCD9\u2070\u2071\u2074-\u208E\u2090-\u209C\u0345\u0656\u17D2\u1D62-\u1D6A\u2A27\u2C7C\u00AA]+/,""),t},Atomik.includeScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e,n.onload=t,document.body.appendChild(n)},Atomik.injectStyles=function(e){jQuery("<div />",{html:"&shy;<style>"+e+"</style>"}).appendTo("body")},Atomik.setDbmStyle=function(e){var t=document.querySelector("#"+e),n=new MutationObserver(function(t){t.forEach(function(){var t=jQuery("iframe"),n=jQuery("#"+e);if(0!==n.length){var a=n.find("Iframe");if(0!==a.length&&a[0].id.startsWith("adf_")){var i=jQuery(a.contents().find("div")[0]);if(0!==i.length&&i[0].id.startsWith("google_ads_iframe")){var o=i.find("Iframe");0!==o.length&&o[0].id.startsWith("google_ads_iframe")&&(a[0].style.width="100%",a[0].style.position="absolute",a[0].style.bottom="0",a.contents().find("body")[0].style.width="100%",i[0].style.width="100%",o[0].style.width="100%")}}}})});n.observe(t,{childList:!0,attributes:!0,subtree:!0})},Atomik.getInstance=function(){return atomikInst},Atomik.track_audience=function(){var e=document.createElement("img");e.src="https://track.adform.net/Serving/TrackPoint/?pm=917458&lid=73540157",e.style.width="1px",e.style.height="1px",document.body.appendChild(e)};var privateSpotXPassback=function(e){e?Atomik.getInstance().consoleLog("ATOMIKSDK spotX AD done"):(Atomik.getInstance().consoleLog("ATOMIKSDK spotX passback"),window.top.Atomik.getInstance().passbackExternalCallback&&window.top.Atomik.getInstance().passbackExternalCallback("",""))},atomikInst=new Atomik;Atomik.doStart=function(){if(!window.jQuery){var e=document.createElement("script");e.type="text/javascript",e.src="https://code.jquery.com/jquery-1.12.4.min.js",e.onload=function(){Atomik.atomikPrivateInit()},document.body.appendChild(e)}else Atomik.atomikPrivateInit()},"loading"==document.readyState?document.addEventListener("DOMContentLoaded",Atomik.doStart):Atomik.doStart();