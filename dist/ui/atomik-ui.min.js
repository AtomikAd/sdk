"use strict";var AtomikUIImpl=function(){this.layout={},this.enterAnimations={},this.exitAnimations={},this.initialized=!1,this.exitAnimationTimeout=null,this.canAnimate=!1,this.isAnimating=!1,this.isAnimatingFromMouse=!1,this.clickTAG=null};AtomikUIImpl.prototype.setClickTAG=function(a){this.clickTAG=a},AtomikUIImpl.showAdContainer=function(a){var b=document.getElementById("atomik-ad-container");b.style.visibility=a},AtomikUIImpl.prototype.resizeElements=function(){for(var a=this.layout.targetWidth,b=$(window).width(),c=this.layout.positions,d=0;d<c.length;d++){var e=c[d],f=$(e.target).data("target-width"),g=$(e.target).data("target-height"),h=Math.floor(f*b/a),j=h*g/f;if($(e.target).width(h),$(e.target).height(j),"#ins-container"==e.target){var k="translate(-"+(f-h)/2+"px, -"+(g-j)/2+"px) scale("+h/f+", "+j/g+")";$(e.target).children().css({"-webkit-transform":k,"-moz-transform":k,"-ms-transform":k,"-o-transform":k,transform:k})}}},AtomikUIImpl.prototype.positionElements=function(){for(var a=this.layout.positions,b=0;b<a.length;b++){var c=a[b],d=c.anchor;if(d!==void 0){for(var e={position:"absolute",margin:"0"},f=d.split("-"),g=0;g<f.length;g++)"center"===f[g]?(void 0===e.bottom&&(e.bottom=0),void 0===e.top&&(e.top=0),void 0===e.left&&(e.left=0),void 0===e.right&&(e.right=0)):"bottom"===f[g]?(e.bottom=0,e.top=""):"top"===f[g]?(e.top=0,e.bottom=""):"left"===f[g]?(e.left=0,e.right=""):"right"===f[g]&&(e.right=0,e.left="");$(c.target).css(e)}}},AtomikUIImpl.prototype.sizeAndPositionElements=function(){for(var a=this.layout.targetWidth,b=$(window).width(),c=this.layout.positions,d=0;d<c.length;d++){var e=c[d],f=$(e.target).data("target-width"),g=$(e.target).data("target-height"),h=$(e.target).width(),j=Math.floor(f*b/a),k=j*g/f;$(e.target).width(j),$(e.target).height(k);var l=parseInt($(e.target).css("bottom"));if($(e.target).css({bottom:l*j/h}),"#ins-container"==e.target){var m="translate(-"+(f-j)/2+"px, -"+(g-k)/2+"px) scale("+j/f+", "+k/g+")";$(e.target).children().css({"-webkit-transform":m,"-moz-transform":m,"-ms-transform":m,"-o-transform":m,transform:m})}}},AtomikUIImpl.prototype.setMouserOver=function(){$("#atomik-ad-container").mouseover(function(){atomikUIInst.startAnimation(!0)||null===atomikUIInst.exitAnimationTimeout||(clearTimeout(atomikUIInst.exitAnimationTimeout),atomikUIInst.exitAnimationTimeout=null,atomikUIInst.setMouseLeave())})},AtomikUIImpl.prototype.setMouseLeave=function(){var a=this;$("#atomik-ad-container").mouseleave(function(){$("#atomik-ad-container").off("mouseleave"),null!==a.exitAnimationTimeout&&clearTimeout(a.exitAnimationTimeout),a.exitAnimationTimeout=setTimeout(function(){a.exitAnimationTimeout=null,a.doExitAnimations()},1e3*parseInt(a.exitAnimations.mouseOutDelay))})},AtomikUIImpl.prototype.setPlaceholderAction=function(a){$(".atomik-placeholder").off("click"),$(".atomik-placeholder").click(function(){if(a){var b=null==atomikUIInst.clickTAG?dhtml.getVar("clickTAG","http://www.atomikad.com"):atomikUIInst.clickTAG;var c=dhtml.getVar("landingPageTarget","_blank");window.open(b,c)}else atomikUIInst.startAnimation()})},AtomikUIImpl.prototype.doEnterAnimations=function(){for(var a,b=0,c=0;c<this.enterAnimations.animations.length;c++)if(a=this.enterAnimations.animations[c],void 0!==a.target&&void 0!==a.duration&&void 0!==a.animation){var d=this.createAnimation(a,!0),e=TweenMax.fromTo(a.target,a.duration,d.fromVars,d.toVars),f=0;void 0!==this.enterAnimations.totalDelay&&(f=this.enterAnimations.totalDelay),void 0!==a.delay&&(f+=a.delay),e.delay(f),f+a.duration>b&&(b=f+a.duration)}this.setPlaceholderAction(!0);var g=$("#bg").attr("src");if($("#bg").attr("src",""),$("#bg").attr("src",g),void 0!==this.exitAnimations)if(this.isAnimatingFromMouse&&!1===/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))atomikUIInst.setMouseLeave();else{var h=b;h+=parseInt(this.exitAnimations.totalDelay),null!==this.exitAnimationTimeout&&clearTimeout(this.exitAnimationTimeout),this.exitAnimationTimeout=setTimeout(function(){atomikUIInst.exitAnimationTimeout=null,atomikUIInst.doExitAnimations()},1e3*h)}},AtomikUIImpl.prototype.doExitAnimations=function(){for(var a,b=0,c=0;c<this.exitAnimations.animations.length;c++)if(a=this.exitAnimations.animations[c],void 0!==a.target&&void 0!==a.duration&&void 0!==a.animation){var d=this.createAnimation(a,!1),e=TweenMax.fromTo(a.target,a.duration,d.fromVars,d.toVars),f=0;void 0!==a.delay&&(f+=a.delay),e.delay(f),f+a.duration>b&&(b=f+a.duration)}this.setPlaceholderAction(!1);var g=this;setTimeout(function(){g.isAnimating=!1,!1===/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&atomikUIInst.setMouserOver()},1e3*b)},AtomikUIImpl.prototype.createAnimation=function(a){var b={},c={};if("fadeIn"===a.animation)b={opacity:0},c={opacity:1};else if("fadeOut"===a.animation)b={opacity:1},c={opacity:0,ease:"Quad.easeIn"};else if("fadeInOut"===a.animation)b={opacity:0},c={opacity:1,ease:"Quad.easeIn",yoyo:!0,repeat:1,repeatDelay:a.pause};else if("translateIn"===a.animation||"translateInOut"===a.animation){for(var d,e=0;e<this.layout.positions.length;e++)if(d=this.layout.positions[e],d.target===a.target)if(-1!==d.anchor.indexOf("bottom")){var f=$(a.target).height(),g=0;d.fixedOffset&&(g=f*d.fixedOffset/100),b={css:{bottom:g-f}},c={css:{bottom:0}};break}else if(-1!==d.anchor.indexOf("top")){var f=$(a.target).height();b={css:{top:-f}},c={css:{top:0}};break}else if(-1!==d.anchor.indexOf("left")){var h=$(a.target).width();b={css:{left:-h}},c={css:{left:0}};break}else if(-1!==d.anchor.indexOf("right")){var h=$(a.target).width();b={css:{right:-h}},c={css:{right:0}};break}"translateInOut"===a.animation&&(c.yoyo=!0,c.repeat=1,c.repeatDelay=a.pause)}else if("translateOut"===a.animation){for(var d,e=0;e<this.layout.positions.length;e++)if(d=this.layout.positions[e],d.target===a.target)if(-1!==d.anchor.indexOf("bottom")){var f=$(a.target).height(),g=0;d.fixedOffset&&(g=f*d.fixedOffset/100),b={css:{bottom:0}},c={css:{bottom:g-f},ease:"Quad.easeIn"};break}else if(-1!==d.anchor.indexOf("top")){var f=$(a.target).height();b={css:{top:0}},c={css:{top:-f},ease:"Quad.easeIn"};break}else if(-1!==d.anchor.indexOf("left")){var h=$(a.target).width();b={css:{left:0}},c={css:{left:-h},ease:"Quad.easeIn"};break}else if(-1!==d.anchor.indexOf("right")){var h=$(a.target).width();b={css:{right:0}},c={css:{right:-h},ease:"Quad.easeIn"};break}}else;return a.secondary&&!1!==a.secondary||(c.overwrite="all"),{fromVars:b,toVars:c}},AtomikUIImpl.prototype.startAnimation=function(a){return!!(this.canAnimate&&!0!=this.isAnimating)&&(this.isAnimatingFromMouse=a||!1,this.isAnimating=!0,atomikUIInst.doEnterAnimations(),AtomikUIImpl.showAdContainer("visible"),!0)},AtomikUIImpl.prototype.initializeAd=function(){if(!1!==this.initialized){this.resizeElements(),this.positionElements(),this.canAnimate=!0;var a=this;$(window).on("resize",function(){a.sizeAndPositionElements()}),!1===/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?atomikUIInst.setMouserOver():atomikUIInst.setPlaceholderAction(!1)}};var atomikUIInst=new AtomikUIImpl,AtomikUI=function(){};AtomikUI.createAd=function(a){atomikUIInst.layout=a.layout,atomikUIInst.enterAnimations=a.enter,atomikUIInst.exitAnimations=a.exit,atomikUIInst.initialized=!0,atomikUIInst.initializeAd()},$(window).on("load",function(){atomikUIInst.canAnimate=!0,atomikUIInst.startAnimation(),$("#close-button").click(function(){if("undefined"!=typeof window.top.atomikInst)for(var a,b="undefined"!=typeof window.parent.external_container,c=0;c<window.top.atomikInst.ads.length;c++)a=window.top.atomikInst.ads[c].adContainer,(window.frameElement.parentElement.parentElement.parentElement===a||b&&window.parent.external_container===a)&&(window.top.atomikInst.ads[c].closed=!0)})});