"use strict";var AtomikUIImpl=function(){this.layout={},this.dropperConfig={},this.readerConfig={},this.initialized=!1,this.canAnimate=!1,this.isAnimating=!1,this.readerContainer=null,this.readerPages=[],this.currentReaderPageIndex=0,this.arrowNext=null,this.arrowPrev=null};AtomikUIImpl.showAdContainer=function(a){var b=document.getElementById("atomik-ad-container");b.style.visibility=a},AtomikUIImpl.prototype.resizeElements=function(){for(var a=this.layout.targetWidth,b=$(window).width(),c=this.layout.positions,d=0;d<c.length;d++){var e=c[d],f=$(e.target).data("target-width"),g=$(e.target).data("target-height"),h=Math.floor(f*b/a);$(e.target).width(h),$(e.target).height(h*g/f),"#dropper"==e.target&&(this.dropperConfig.left=this.dropperConfig.left*b/a,this.dropperConfig.bottom=this.dropperConfig.bottom*b/a)}},AtomikUIImpl.prototype.positionElements=function(){for(var a=this.layout.positions,b=0;b<a.length;b++){var c=a[b],d=c.anchor;if(d!==void 0){var e={position:"absolute",margin:"0"};if("#dropper"==c.target){var f=$(window).width(),g=$(c.target).width();e.left=(f-g)/2+"px";var h=$(window).height(),j=$(c.target).height();e.bottom=(h-j)/2+"px"}else for(var k=d.split("-"),l=0;l<k.length;l++)"center"===k[l]?(void 0===e.bottom&&(e.bottom=0),void 0===e.top&&(e.top=0),void 0===e.left&&(e.left=0),void 0===e.right&&(e.right=0)):"bottom"===k[l]?(e.bottom=0,e.top=""):"top"===k[l]?(e.top=0,e.bottom=""):"left"===k[l]?(e.left=0,e.right=""):"right"===k[l]&&(e.right=0,e.left="");$(c.target).css(e)}}},AtomikUIImpl.prototype.sizeAndPositionElements=function(){for(var a=this.layout.targetWidth,b=$(window).width(),c=this.layout.positions,d=0;d<c.length;d++){var e=c[d],f=$(e.target).data("target-width"),g=$(e.target).data("target-height"),h=$(e.target).width(),j=Math.floor(f*b/a);$(e.target).width(j),$(e.target).height(j*g/f);var k=parseInt($(e.target).css("bottom"));if($(e.target).css({bottom:k*j/h}),$(e.target).css("left")){var l=parseInt($(e.target).css("left"));$(e.target).css({left:l*j/h})}}},AtomikUIImpl.prototype.doEnterAnimations=function(){var a=0;TweenMax.fromTo("#dropper",1,{css:{bottom:$(window).height()}},{css:{bottom:$("#dropper").css("bottom")}}),a+=1,$(".bottom-banner").each(function(){TweenMax.fromTo(this,.5,{css:{bottom:-$(this).height()}},{css:{bottom:0},delay:a})}),TweenMax.to("#dropper",1.2,{left:this.dropperConfig.left,bottom:this.dropperConfig.bottom,rotation:this.dropperConfig.rotationDegree,scaleX:this.dropperConfig.scale,scaleY:this.dropperConfig.scale,ease:"Quad.easeInOut",delay:a})},AtomikUIImpl.prototype.startAnimation=function(){return!!(this.canAnimate&&!0!=this.isAnimating)&&(this.isAnimating=!0,atomikUIInst.doEnterAnimations(),AtomikUIImpl.showAdContainer("visible"),!0)},AtomikUIImpl.prototype.createReader=function(){if(!this.readerContainer){var a=this;this.readerContainer=window.top.document.createElement("div");var b=$(this.readerContainer);b.css({position:"fixed",border:"none",margin:0,padding:0,zIndex:100,width:"100%",height:"100%",top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.4)"}),b.click(function(){a.readerContainer.parentNode.removeChild(a.readerContainer),a.readerContainer=null,a.readerPages=[],a.currentReaderPageIndex=0}),window.top.document.body.appendChild(this.readerContainer);var c,d,e=this.readerConfig.targetWidth,f=this.readerConfig.targetHeight,g=b.width(),h=b.height();g>h?(d=h-120,c=d*e/f):(c=g-160,d=c*f/e);var j=window.top.document.createElement("div");$(j).css({position:"absolute",width:c,height:d,left:(g-c)/2,top:(h-d)/2,backgroundColor:"white",overflow:"hidden"}),$(j).click(function(a){a.stopPropagation(),atomikUIInst.changeReaderPage(!0)}),this.readerContainer.appendChild(j);for(var k,l=0;l<this.readerConfig.imgs.length;l++)k=window.top.document.createElement("img"),k.src=this.readerConfig.imgs[l],$(k).css({position:"absolute",minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",width:"auto",height:"auto",left:0,top:0,cursor:"pointer",zIndex:this.readerConfig.imgs.length-l}),this.readerPages.push(k),j.appendChild(k);if(1<this.readerPages.length){var m=window.top.document.createElement("div"),n="https://atomikecn.nohup.it/ads/dropdown/ui/arrow_next.png";$(m).css({position:"absolute",width:40,height:40,right:parseInt($(j).css("right"))-60,top:(h-40)/2,backgroundImage:"url('"+n+"')",backgroundSize:"contain",cursor:"pointer"}),$(m).click(function(a){a.stopPropagation(),atomikUIInst.changeReaderPage(!0)}),this.readerContainer.appendChild(m),this.arrowNext=m;var o=window.top.document.createElement("div"),n="https://atomikecn.nohup.it/ads/dropdown/ui/arrow_prev.png";$(o).css({position:"absolute",width:40,height:40,left:parseInt($(j).css("left"))-60,top:(h-40)/2,backgroundImage:"url('"+n+"')",backgroundSize:"contain",cursor:"pointer",visibility:"hidden"}),$(o).click(function(a){a.stopPropagation(),atomikUIInst.changeReaderPage(!1)}),this.readerContainer.appendChild(o),this.arrowPrev=o}}},AtomikUIImpl.prototype.changeReaderPage=function(a){if(!(a&&this.currentReaderPageIndex==this.readerPages.length-1)&&(a||0!=this.currentReaderPageIndex)){var b=a?this.currentReaderPageIndex:this.currentReaderPageIndex-1,c=this.readerPages[b];TweenMax.to(c,1,{xPercent:a?"-100":"0",opacity:a?0:1,ease:a?"Quad.easeIn":"Quad.easeOut"}),this.currentReaderPageIndex=a?b+1:b,0==this.currentReaderPageIndex?$(this.arrowPrev).css("visibility","hidden"):$(this.arrowPrev).css("visibility","visible"),this.currentReaderPageIndex==this.readerPages.length-1?$(this.arrowNext).css("visibility","hidden"):$(this.arrowNext).css("visibility","visible")}},AtomikUIImpl.prototype.initializeAd=function(){if(!1!==this.initialized){this.resizeElements(),this.positionElements();var a=this;$(window).on("resize",function(){a.sizeAndPositionElements()})}};var atomikUIInst=new AtomikUIImpl,AtomikUI=function(){};AtomikUI.createAd=function(a){atomikUIInst.layout=a.layout,atomikUIInst.dropperConfig=a.dropper,atomikUIInst.readerConfig=a.reader,atomikUIInst.initialized=!0,atomikUIInst.initializeAd()},$(window).on("load",function(){atomikUIInst.canAnimate=!0,atomikUIInst.startAnimation(),$("#close-button").click(function(){if("undefined"!=typeof window.top.atomikInst)for(var a,b="undefined"!=typeof window.parent.external_container,c=0;c<window.top.atomikInst.ads.length;c++)a=window.top.atomikInst.ads[c].adContainer,(window.frameElement.parentElement.parentElement.parentElement===a||b&&window.parent.external_container===a)&&(window.top.atomikInst.ads[c].closed=!0)})});